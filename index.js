import{a as d,i as c,S as A,N as P,P as O,A as J}from"./assets/vendor-DaBFZYBc.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function r(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(n){if(n.ep)return;n.ep=!0;const o=r(n);fetch(n.href,o)}})();const E=document.querySelector(".burger-menu"),j=document.querySelector(".close-burger-menu"),p=document.querySelector(".menu-overlay"),H=document.body,ee=document.querySelectorAll(".navigation-item-menu, .go-shopping-button-menu");function D(e){e.key==="Escape"&&b()}function N(e){const t=e.target,r=t.closest(".header-menu-bg"),s=t.closest(".navigation-menu");r||s||isInsideNavAfterContent||b()}function te(){p.classList.add("open"),H.classList.add("menu-open"),document.addEventListener("keydown",D),p.addEventListener("click",N)}function b(){p.classList.remove("open"),H.classList.remove("menu-open"),document.removeEventListener("keydown",D),p.removeEventListener("click",N)}E&&E.addEventListener("click",te);j&&j.addEventListener("click",b);ee.forEach(e=>{e.addEventListener("click",b)});const u="https://furniture-store-v2.b.goit.study/api";async function re(){try{return(await d.get(`${u}/categories`)).data}catch(e){throw console.error("Error fetching categories:",e),e}}async function w(e=1){try{return(await d.get(`${u}/furnitures`,{params:{limit:8,page:e}})).data}catch(t){throw console.error("Error fetching default furniture:",t),t}}async function I(e,t=1){try{return(await d.get(`${u}/furnitures`,{params:{category:e,limit:8,page:t}})).data}catch(r){throw console.error(`Error fetching furniture for category ${e}:`,r),r}}async function se(e){try{return(await d.get(`${u}/furnitures/${e}`)).data}catch(t){throw console.error(`Error fetching furniture with id ${e}:`,t),t}}async function oe(){try{return(await d.get(`${u}/feedbacks`,{params:{limit:10}})).data}catch(e){throw console.error("Error fetching feedbacks:",e),e}}async function ne(e){try{const t=await d.post(`${u}/orders`,e);return console.log(t.data),t.data}catch(t){throw console.error("Error submitting order:",t),t}}async function ae(){try{return(await d.get(`${u}/furnitures`,{params:{type:"popular"}})).data}catch(e){throw console.error("Error fetching popular furniture:",e),e}}let F=null,T=null;function R(e){F=e}function z(){return F}function ie(e){T=e}function ce(){return T}const g=document.querySelector(".modal-overlay"),le=document.querySelector(".close-button"),m=document.querySelector(".order-form"),de=document.querySelector(".loader"),ue=document.querySelectorAll(".user-input, .user-text"),fe=document.querySelector(".order-button"),me=document.querySelector("#username");function v(){g.classList.remove("is-open"),document.body.style.overflow=""}function pe(){g.classList.add("is-open"),me.focus(),document.body.style.overflow="hidden"}function q(){de.classList.toggle("hidden")}function C(){fe.classList.toggle("hidden")}le.addEventListener("click",v);g.addEventListener("click",e=>{e.target===g&&v()});document.addEventListener("keydown",e=>{e.key==="Escape"&&v()});m.addEventListener("submit",ge);async function ge(e){e.preventDefault(),q(),C();const t=m.elements.username.value.trim(),r=m.elements["user-phone"].value.trim(),s=m.elements["form-comments"].value.trim(),n={name:t,phone:r,modelId:z(),color:ce(),comment:s};try{const o=await ne(n);console.log(o),o&&c.success({title:`Дякуємо, ${o.name}!`,message:`Замовлення №${o.orderNum} прийнято! Наш оператор зв'яжеться з вами найближчим часом.`,color:"green",position:"center",titleSize:"18px",messageSize:"18px"}),m.reset(),v()}catch(o){ue.forEach(a=>{a.classList.add("error-message"),a.addEventListener("input",()=>{a.classList.remove("error-message")})}),c.error({title:"Помилка",message:`${o.response.data.message}`,color:"red",position:"center",closeOnClick:!0,titleSize:"18px",messageSize:"18px"})}finally{q(),C()}}const K="/undefined-heroes/assets/icons-sprite-W6WNuLOL.svg",ye=document.querySelector(".js-modal-product"),V=ye.querySelector(".loader");async function G(){const e=z();if(e){ve();try{const t=await se(e);he(t)}catch(t){c.error({title:"Error",position:"topRight",message:`Помилка завантаження товару: ${t}`})}finally{xe()}}}function he(e){const t=document.querySelector(".js-modal-product"),r=t.querySelector(".product-modal");r.querySelector(".js-title").textContent=e.name,r.querySelector(".js-category").textContent=e.category.name,r.querySelector(".js-price").textContent=`${e.price} грн`,r.querySelector(".js-description").textContent=e.description,r.querySelector(".js-dimensions").textContent=`Розміри: ${e.sizes}`;const s=r.querySelector(".js-big-img");s.innerHTML=`<img src="${e.images[0]}" alt="${e.name}">`;const n=r.querySelector(".js-thumbs");n.innerHTML=`
    <img src="${e.images[1]}" alt="${e.name}">
    <img src="${e.images[2]}" alt="${e.name}">
  `;const o=r.querySelector(".js-colors");o.innerHTML=e.color.map((i,Z)=>`
      <li>
        <label class="color-option">
          <input type="radio" name="color" value="${i}" ${Z===0?"checked":""}/>
          <span class="color-swatch" style="background:${i}"></span>
        </label>
      </li>`).join(""),r.querySelector(".js-rating").innerHTML=be(e.rate),t.classList.add("active"),setTimeout(()=>r.classList.add("animate-in"),10),document.body.style.overflow="hidden",o.addEventListener("change",i=>{i.target.name==="color"&&ie(i.target.value)}),r.querySelector(".js-to-order").addEventListener("click",()=>{y(),setTimeout(()=>{pe()},350)})}function be(e){const t=Math.floor(e),r=e%1!==0,s=5;let n="";for(let o=0;o<s;o++){let a="star-empty";o<t?a="star-filled":o===t&&r&&(a="star-half"),n+=`
      <div class="star">
        <svg width="24" height="24" viewBox="0 0 34 32">
          <use href="${K}#${a}"></use>
        </svg>
      </div>
    `}return`
    <div class="rating star-svg medium color-default">
      <div class="star-container">
        ${n}
      </div>
    </div>
  `}function y(){const e=document.querySelector(".js-modal-product");e.querySelector(".product-modal").classList.remove("animate-in"),setTimeout(()=>{e.classList.remove("active"),document.body.style.overflow=""},300)}document.addEventListener("click",e=>{e.target.closest(".js-close-product")&&y();const t=document.querySelector(".js-modal-product");e.target===t&&y()});window.addEventListener("keydown",e=>{e.key==="Escape"&&y()});function ve(){V.classList.remove("hidden")}function xe(){V.classList.add("hidden")}const we="/undefined-heroes/assets/all1x-DVLQxvfQ.jpg",Le="/undefined-heroes/assets/all2x-BwIHHWMD.jpg",$e="/undefined-heroes/assets/sofa1x-QsBewZz6.jpg",Se="/undefined-heroes/assets/sofa2x-ksNqbS6S.jpg",ke="/undefined-heroes/assets/wardrobe1x-CNdXldi6.jpg",Ee="/undefined-heroes/assets/wardrobe2x-B0yzyB2h.jpg",je="/undefined-heroes/assets/bed1x-BiNhCcRz.jpg",qe="/undefined-heroes/assets/bed2x-BzhwNAdh.jpg",Ce="/undefined-heroes/assets/table1x-DDchFtkm.jpg",Be="/undefined-heroes/assets/table2x-DAjhde8X.jpg",Me="/undefined-heroes/assets/chairs1x-BX7I8L1J.jpg",Ae="/undefined-heroes/assets/chairs2x-gd_HE6KZ.jpg",Pe="/undefined-heroes/assets/kitchen1x-DLfabGWs.jpg",Oe="/undefined-heroes/assets/kitchen2x-DOXUYCx5.jpg",He="/undefined-heroes/assets/kid1x-1AyrqYvR.jpg",De="/undefined-heroes/assets/kid2x-DPfdw4sK.jpg",Ne="/undefined-heroes/assets/office1x-KeuwwDki.jpg",Ie="/undefined-heroes/assets/office2x-Co3Nr9L4.jpg",Fe="/undefined-heroes/assets/entryway1x-w1YZfq3F.jpg",Te="/undefined-heroes/assets/entryway2x-BrKEwtLw.jpg",Re="/undefined-heroes/assets/bathroom1x-DBqaffN1.jpg",ze="/undefined-heroes/assets/bathroom2x-COqscwDb.jpg",Ke="/undefined-heroes/assets/garden1x-hYg64p0q.jpg",Ve="/undefined-heroes/assets/garden2x-CjS5Ec1I.jpg",Ge="/undefined-heroes/assets/decor1x-DNOK_2i4.jpg",We="/undefined-heroes/assets/decor2x-C8z5OnE5.jpg",L=document.querySelector("ul.furniture-categories"),$=document.querySelector("ul.furniture-gallery"),f=document.querySelector("button.furniture-load-more-btn"),W=document.querySelector("span.loader"),X=[{id:"all",name:"Всі товари",image:{x1:we,x2:Le}},{id:"66504a50a1b2c3d4e5f6a7b8",name:"М'які меблі",image:{x1:$e,x2:Se}},{id:"66504a50a1b2c3d4e5f6a7b9",name:"Шафи та системи зберігання",image:{x1:ke,x2:Ee}},{id:"66504a50a1b2c3d4e5f6a7ba",name:"Ліжка та матраци",image:{x1:je,x2:qe}},{id:"66504a50a1b2c3d4e5f6a7bb",name:"Столи",image:{x1:Ce,x2:Be}},{id:"66504a50a1b2c3d4e5f6a7bc",name:"Стільці та табурети",image:{x1:Me,x2:Ae}},{id:"66504a50a1b2c3d4e5f6a7bd",name:"Кухні",image:{x1:Pe,x2:Oe}},{id:"66504a50a1b2c3d4e5f6a7be",name:"Меблі для дитячої",image:{x1:He,x2:De}},{id:"66504a50a1b2c3d4e5f6a7bf",name:"Меблі для офісу",image:{x1:Ne,x2:Ie}},{id:"66504a50a1b2c3d4e5f6a7c0",name:"Меблі для передпокою",image:{x1:Fe,x2:Te}},{id:"66504a50a1b2c3d4e5f6a7c1",name:"Меблі для ванної кімнати",image:{x1:Re,x2:ze}},{id:"66504a50a1b2c3d4e5f6a7c2",name:"Садові та вуличні меблі",image:{x1:Ke,x2:Ve}},{id:"66504a50a1b2c3d4e5f6a7c3",name:"Декор та аксесуари",image:{x1:Ge,x2:We}}],Xe=async()=>{try{let e=await re();L.insertAdjacentHTML("beforeend",X.filter(t=>t.id==="all"||e.find(r=>r._id===t.id)).map(({id:t,name:r,image:s})=>`
                    <li class="category-item">
                        <a class="category-link" data-category="${t}">
                            <div class="category-img-wrapper">
                                <img class="category-img" src="${s.x1}"  srcset="${s.x1} 1x, ${s.x2} 2x" alt="${r}"/>
                                <div class="category-overlay">${r}</div> 
                            </div>
                        </a>
                    </li>                
                    `).join(""))}catch{c.error({title:"Error",message:"Oops! Something went wrong",position:"topRight"})}},S=e=>{$.insertAdjacentHTML("beforeend",e.map(({_id:t,name:r,color:s,price:n,images:o})=>{const a=s.map(i=>`<span class="color-pick" style="background-color:${i};"></span>`).join("");return`
                <li class="gallery-item" data-id="${t}">
                    <img src="${o[0]}" alt="${r}" class="furniture-img"/>
                    <div class="gallery-item-dscr">
                        <p class="gallery-item-title">${r}</p>
                        <div class="color" data-id="${s}">${a}</div>
                        <p class="price">${n} грн</p>                    
                    </div>
                    <button type="button" class="gallery-item-info-btn">Детальніше</button>
                </li>
                `}).join(""))},Ye=()=>{$.innerHTML=""},k=()=>{W.classList.remove("hidden")},h=()=>{W.classList.add("hidden")},Y=e=>{L.querySelectorAll(".category-link").forEach(t=>{const r=t.getAttribute("data-category")===e;t.classList.toggle("active",r);const s=t.querySelector(".category-overlay");s&&(s.classList.remove("is-active"),r&&s.classList.add("is-active"))})};let l=1,x="all";document.addEventListener("DOMContentLoaded",async()=>{try{Xe(X),k();const e=await w(l);e.furnitures.length<8?f.disabled=!0:f.disabled=!1,S(e.furnitures),h(),Y("all")}catch(e){c.error({title:"Error",message:`Помилка при завантаженні меблів: ${e}`,position:"topRight"}),h()}});L.addEventListener("click",async e=>{const t=e.target.closest(".category-link");if(!t)return;const r=t.dataset.category;Y(r),Ye(),k();try{l=1,x=r;let s;r==="all"?s=await w(l):s=await I(r,l),s.furnitures.length<8?f.disabled=!0:f.disabled=!1,S(s.furnitures)}catch(s){c.error({title:"Error",message:`Помилка при завантаженні меблів по категорії: ${s}`,position:"topRight"})}finally{h()}});f.addEventListener("click",async()=>{l+=1,k();try{let e;x==="all"?e=await w(l):e=await I(x,l),e.furnitures.length<8&&(f.disabled=!0),S(e.furnitures)}catch(e){c.error({title:"Error",message:`Помилка при завантаженні меблів: ${e}`,position:"topRight"})}finally{h()}});$.addEventListener("click",e=>{if(e.target.classList.contains("gallery-item-info-btn")){const t=e.target.closest(".gallery-item").dataset.id;R(t),G()}});const _=document.querySelector(".popular-products-gallery"),Q=document.querySelector(".loader");document.addEventListener("DOMContentLoaded",_e);_.addEventListener("click",et);async function _e(){try{Ue();const{furnitures:e}=await ae(),t=Qe(e);_.insertAdjacentHTML("beforeend",t),Je()}catch{c.error({title:"Error",position:"topRight",message:"Oops! Something went wrong"})}finally{Ze()}}function Qe(e){return e.map(({_id:t,name:r,color:s,price:n,images:o})=>{const a=s.map(i=>`<span class="popular-gallery-item-color-pick" style="background-color:${i};"></span>`).join("");return`
    <li class="popular-gallery-item swiper-slide" data-id="${t}">
        <img src="${o[0]}" alt="${r}" class="popular-gallery-item-img"/>
        <div class="popular-gallery-item-dscr">
            <p class="popular-gallery-item-title">${r}</p>
            <div class="popular-gallery-item-color" data-id="${s}">${a}</div>
             <p class="popular-gallery-item-price">${n} грн</p>                    
        </div>
        <button type="button" class="popular-gallery-item-info-btn">Детальніше</button>
    </li>`}).join("")}function Ue(){Q.classList.remove("hidden")}function Ze(){Q.classList.add("hidden")}function Je(){const e=document.querySelector(".popular-products-swiper"),t=document.querySelector(".popular-products-prev"),r=document.querySelector(".popular-products-next");new A(e,{modules:[P,O],slidesPerView:1,spaceBetween:16,loop:!1,navigation:{nextEl:r,prevEl:t},pagination:{el:".popular-products-pagination",clickable:!0,dynamicBullets:!0},breakpoints:{768:{slidesPerView:2,spaceBetween:24},1440:{slidesPerView:4}},on:{init:function(){B(this,t,r)},slideChange:function(){B(this,t,r)}}})}function B(e,t,r){t.disabled=e.isBeginning,r.disabled=e.isEnd}function et(e){const t=e.target.closest(".popular-gallery-item-info-btn");if(!t)return;const s=t.closest(".popular-gallery-item").dataset.id;R(s),G()}function tt(){const e={duration:350,showMultiple:!1,elementClass:"accordion-item",triggerClass:"accordion-trigger",panelClass:"accordion-panel",activeClass:"accordion-active"},t=new J(".accordion-list",e);return document.querySelectorAll(".accordion-item").forEach(r=>r.classList.add("js-enabled")),t}document.addEventListener("DOMContentLoaded",()=>{document.querySelector(".accordion-list")&&tt()});const U=document.getElementById("loader");function rt(){U.classList.remove("hidden")}function st(){U.classList.add("hidden")}function ot(e){return e>=3.3&&e<=3.7?3.5:e>=3.8&&e<=4.2?4:Math.round(e*2)/2}function nt(e){const t=Math.floor(e),r=e%1!==0,s=5;let n="";for(let o=0;o<s;o++){let a="star-empty";o<t?a="star-filled":o===t&&r&&(a="star-half"),n+=`
      <div class="star">
        <svg width="24" height="24" viewBox="0 0 34 32">
          <use href="${K}#${a}"></use>
        </svg>
      </div>
    `}return n}function at(e){const t=document.getElementById("feedback-list");t.innerHTML="",e.forEach(r=>{const s=ot(r.rate),n=s%1!==0,i=`
        <li class="feedback-card swiper-slide">
            <div class="rating ${`value-${Math.floor(s)}`} ${n?"half":""} star-svg medium color-default">
              <div class="star-container">
                ${nt(s)}
              </div>
            </div>
            <p class="feedback-text">"${r.descr}"</p>
            <p class="feedback-author">${r.name}</p>
        </li>
    `;t.insertAdjacentHTML("beforeend",i)})}function it(){const e=document.querySelector(".feedback-slider.swiper"),t=document.querySelector(".feedback-prev"),r=document.querySelector(".feedback-next");new A(e,{modules:[P,O],loop:!1,spaceBetween:20,slidesPerView:1,pagination:{el:".feedback-pagination",clickable:!0},navigation:{nextEl:r,prevEl:t},breakpoints:{768:{slidesPerView:2,spaceBetween:30},1440:{slidesPerView:3,spaceBetween:40}},on:{init:function(){M(this,t,r)},slideChange:function(){M(this,t,r)}}})}function M(e,t,r){t.disabled=e.isBeginning,r.disabled=e.isEnd}async function ct(){rt();try{const e=await oe();let t;if(e&&Array.isArray(e.feedbacks))t=e.feedbacks;else if(Array.isArray(e))t=e;else{console.error("API повернуло дані в неочікуваному форматі:",e);return}at(t),it()}catch(e){c.error({title:"Error",position:"topRight",message:`Помилка завантаження відгуків: ${e}`})}finally{st()}}ct();
//# sourceMappingURL=index.js.map
