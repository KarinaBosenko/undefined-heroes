import{a as d,i as h,S as U,N as J,P as Q,A as W}from"./assets/vendor-DyNIEbgu.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(o){if(o.ep)return;o.ep=!0;const i=r(o);fetch(o.href,i)}})();const j=document.querySelector(".burger-menu"),E=document.querySelector(".close-burger-menu"),g=document.querySelector(".menu-overlay"),M=document.body,X=document.querySelectorAll(".navigation-item-menu, .go-shopping-button-menu");function P(e){e.key==="Escape"&&b()}function A(e){const t=e.target,r=t.closest(".header-menu-bg"),n=t.closest(".navigation-menu"),o=t.closest(".navigation-menu::after");r||n||o||b()}function Y(){g.classList.add("open"),M.classList.add("menu-open"),document.addEventListener("keydown",P),g.addEventListener("click",A)}function b(){g.classList.remove("open"),M.classList.remove("menu-open"),document.removeEventListener("keydown",P),g.removeEventListener("click",A)}j&&j.addEventListener("click",Y);E&&E.addEventListener("click",b);X.forEach(e=>{e.addEventListener("click",b)});const u="https://furniture-store-v2.b.goit.study/api";async function Z(){try{return(await d.get(`${u}/categories`)).data}catch(e){throw console.error("Error fetching categories:",e),e}}async function x(e=1){try{return(await d.get(`${u}/furnitures`,{params:{limit:8,page:e}})).data}catch(t){throw console.error("Error fetching default furniture:",t),t}}async function B(e,t=1){try{return(await d.get(`${u}/furnitures`,{params:{category:e,limit:8,page:t}})).data}catch(r){throw console.error(`Error fetching furniture for category ${e}:`,r),r}}async function ee(e){try{return(await d.get(`${u}/furnitures/${e}`)).data}catch(t){throw console.error(`Error fetching furniture with id ${e}:`,t),t}}async function te(e){try{const t=await d.post(`${u}/orders`,e);return console.log(t.data),t.data}catch(t){throw console.error("Error submitting order:",t),t}}async function re(){try{return(await d.get(`${u}/furnitures`,{params:{type:"popular"}})).data}catch(e){throw console.error("Error fetching popular furniture:",e),e}}let O=null,T=null;function F(e){O=e}function H(){return O}function ne(e){T=e}function oe(){return T}const f=document.querySelector(".modal-overlay"),ie=document.querySelector(".close-button"),m=document.querySelector(".order-form"),se=document.querySelector(".loader"),ae=document.querySelectorAll(".user-input, .user-text"),ce=document.querySelector(".order-button");function v(){f.classList.remove("is-open"),document.body.style.overflow=""}function le(){f.classList.add("is-open"),document.body.style.overflow="hidden"}function k(){se.classList.toggle("hidden")}function q(){ce.classList.toggle("hidden")}ie.addEventListener("click",v);f.addEventListener("click",e=>{e.target===f&&v()});document.addEventListener("keydown",e=>{e.key==="Escape"&&v()});m.addEventListener("submit",de);async function de(e){e.preventDefault(),k(),q();const t=m.elements.username.value.trim(),r=m.elements["user-phone"].value.trim(),n=m.elements["form-comments"].value.trim(),o={name:t,phone:r,modelId:H(),color:oe(),comment:n};try{const i=await te(o);console.log(i),i&&h.success({title:`Дякуємо, ${i.name}!`,message:`Замовлення №${i.orderNum} прийнято! Наш оператор зв'яжеться з вами найближчим часом.`,color:"green",position:"center",titleSize:"18px",messageSize:"18px"}),m.reset(),v()}catch(i){ae.forEach(s=>{s.classList.add("error-message"),s.addEventListener("input",()=>{s.classList.remove("error-message")})}),h.error({title:"Помилка",message:`${i.response.data.message}`,color:"red",position:"center",closeOnClick:!0,titleSize:"18px",messageSize:"18px"})}finally{k(),q()}}const ue=document.querySelector(".js-modal-product"),N=ue.querySelector(".loader");async function I(){const e=H();if(e){fe();try{const t=await ee(e);me(t)}catch(t){console.error("Помилка завантаження товару:",t)}finally{pe()}}}function me(e){const t=document.querySelector(".js-modal-product"),r=t.querySelector(".product-modal");r.querySelector(".js-title").textContent=e.name,r.querySelector(".js-category").textContent=e.category.name,r.querySelector(".js-price").textContent=`${e.price} грн`,r.querySelector(".js-description").textContent=e.description,r.querySelector(".js-dimensions").textContent=`Розміри: ${e.sizes}`;const n=r.querySelector(".js-big-img");n.innerHTML=`<img src="${e.images[0]}" alt="${e.name}">`;const o=r.querySelector(".js-thumbs");o.innerHTML=`
    <img src="${e.images[1]}" alt="${e.name}">
    <img src="${e.images[2]}" alt="${e.name}">
  `;const i=r.querySelector(".js-colors");i.innerHTML=e.color.map((a,R)=>`
      <li>
        <label class="color-option">
          <input type="radio" name="color" value="${a}" ${R===0?"checked":""}/>
          <span class="color-swatch" style="background:${a}"></span>
        </label>
      </li>`).join(""),r.querySelector(".js-rating").innerHTML=ge(e.rate),t.classList.add("active"),setTimeout(()=>r.classList.add("animate-in"),10),document.body.style.overflow="hidden",i.addEventListener("change",a=>{a.target.name==="color"&&ne(a.target.value)}),r.querySelector(".js-to-order").addEventListener("click",()=>{p(),setTimeout(()=>{le()},350)})}function ge(e){const t=Math.floor(e),r=5-t;return"★".repeat(t)+"☆".repeat(r)}function p(){const e=document.querySelector(".js-modal-product");e.querySelector(".product-modal").classList.remove("animate-in"),setTimeout(()=>{e.classList.remove("active"),document.body.style.overflow=""},300)}document.addEventListener("click",e=>{e.target.closest(".js-close-product")&&p();const t=document.querySelector(".js-modal-product");e.target===t&&p()});window.addEventListener("keydown",e=>{e.key==="Escape"&&p()});function fe(){N.classList.remove("hidden")}function pe(){N.classList.add("hidden")}const w=document.querySelector("ul.furniture-categories"),S=document.querySelector("ul.furniture-gallery"),l=document.querySelector("button.furniture-load-more-btn"),D=document.querySelector("span.loader"),z=[{id:"all",name:"Всі товари",image:{x1:"/img/furniture_list_section/all1x-min.jpg",x2:"/img/furniture_list_section/all2x-min.jpg"}},{id:"66504a50a1b2c3d4e5f6a7b8",name:"М'які меблі",image:{x1:"/img/furniture_list_section/sofa1x-min.jpg",x2:"/img/furniture_list_section/sofa2x-min.jpg"}},{id:"66504a50a1b2c3d4e5f6a7b9",name:"Шафи та системи зберігання",image:{x1:"/img/furniture_list_section/wardrobe1x-min.jpg",x2:"/img/furniture_list_section/wardrobe2x-min.jpg"}},{id:"66504a50a1b2c3d4e5f6a7ba",name:"Ліжка та матраци",image:{x1:"/img/furniture_list_section/bed1x-min.jpg",x2:"/img/furniture_list_section/bed2x-min.jpg"}},{id:"66504a50a1b2c3d4e5f6a7bb",name:"Столи",image:{x1:"/img/furniture_list_section/table1x-min.jpg",x2:"/img/furniture_list_section/table2x-min.jpg"}},{id:"66504a50a1b2c3d4e5f6a7bc",name:"Стільці та табурети",image:{x1:"/img/furniture_list_section/chairs1x-min.jpg",x2:"/img/furniture_list_section/chairs2x-min.jpg"}},{id:"66504a50a1b2c3d4e5f6a7bd",name:"Кухні",image:{x1:"/img/furniture_list_section/kitchen1x-min.jpg",x2:"/img/furniture_list_section/kitchen2x-min.jpg"}},{id:"66504a50a1b2c3d4e5f6a7be",name:"Меблі для дитячої",image:{x1:"/img/furniture_list_section/kid1x-min.jpg",x2:"/img/furniture_list_section/kid2x-min.jpg"}},{id:"66504a50a1b2c3d4e5f6a7bf",name:"Меблі для офісу",image:{x1:"/img/furniture_list_section/office1x-min.jpg",x2:"/img/furniture_list_section/office2x-min.jpg"}},{id:"66504a50a1b2c3d4e5f6a7c0",name:"Меблі для передпокою",image:{x1:"/img/furniture_list_section/entryway1x-min.jpg",x2:"/img/furniture_list_section/entryway2x-min.jpg"}},{id:"66504a50a1b2c3d4e5f6a7c1",name:"Меблі для ванної кімнати",image:{x1:"/img/furniture_list_section/bathroom1x-min.jpg",x2:"/img/furniture_list_section/bathroom2x-min.jpg"}},{id:"66504a50a1b2c3d4e5f6a7c2",name:"Садові та вуличні меблі",image:{x1:"/img/furniture_list_section/garden1x-min.jpg",x2:"/img/furniture_list_section/garden2x-min.jpg"}},{id:"66504a50a1b2c3d4e5f6a7c3",name:"Декор та аксесуари",image:{x1:"/img/furniture_list_section/decor1x-min.jpg",x2:"/img/furniture_list_section/decor2x-min.jpg"}}],ye=async()=>{try{let e=await Z();w.insertAdjacentHTML("beforeend",z.filter(t=>t.id==="all"||e.find(r=>r._id===t.id)).map(({id:t,name:r,image:n})=>`
                    <li class="category-item">
                        <a class="category-link" data-category="${t}">
                            <div class="category-img-wrapper">
                                <img class="category-img" src="${n.x1}" srcset="${n.x1} 1x, ${n.x2} 2x" alt="${r}"/>
                                <div class="category-overlay">${r}</div> 
                            </div>
                        </a>
                    </li>                
                    `).join(""))}catch(e){console.error("Помилка при заватаженні категорій: ",e)}},_=e=>{S.insertAdjacentHTML("beforeend",e.map(({_id:t,name:r,color:n,price:o,images:i})=>{const s=n.map(a=>`<span class="color-pick" style="background-color:${a};"></span>`).join("");return`
                <li class="gallery-item" data-id="${t}">
                    <img src="${i[0]}" alt="${r}" class="furniture-img"/>
                    <div class="gallery-item-dscr">
                        <p class="furniture-title">${r}</p>
                        <div class="color" data-id="${n}">${s}</div>
                        <p class="price">${o} грн</p>                    
                    </div>
                    <button type="button" class="gallery-item-info-btn">Детальніше</button>
                </li>
                `}).join(""))},be=()=>{S.innerHTML=""},$=()=>{D.classList.remove("hidden")},y=()=>{D.classList.add("hidden")},G=e=>{w.querySelectorAll(".category-link").forEach(t=>{const r=t.getAttribute("data-category")===e;t.classList.toggle("active",r);const n=t.querySelector(".category-overlay");n&&(n.classList.remove("is-active"),r&&n.classList.add("is-active"))})};let c=1,L="all";document.addEventListener("DOMContentLoaded",async()=>{try{ye(z),$();const e=await x(c);e.furnitures.length<8?l.disabled=!0:l.disabled=!1,_(e.furnitures),y(),G("all")}catch(e){console.error("Помилка при завантаженні меблів:",e),y()}});w.addEventListener("click",async e=>{const t=e.target.closest(".category-link");if(!t)return;const r=t.dataset.category;G(r),be(),$();try{c=1,L=r;let n;r==="all"?n=await x(c):n=await B(r,c),n.furnitures.length<8?l.disabled=!0:l.disabled=!1,_(n.furnitures)}catch(n){console.error("Помилка при завантаженні меблів по категорії:",n)}finally{y()}});l.addEventListener("click",async()=>{c+=1,$();try{let e;L==="all"?e=await x(c):e=await B(L,c),e.furnitures.length<8&&(l.disabled=!0),_(e.furnitures)}catch(e){console.error("Помилка при завантаженні меблів:",e)}finally{y()}});S.addEventListener("click",e=>{if(e.target.classList.contains("gallery-item-info-btn")){const t=e.target.closest(".gallery-item").dataset.id;F(t),I()}});const V=document.querySelector(".popular-products-gallery"),K=document.querySelector(".loader");document.addEventListener("DOMContentLoaded",ve);V.addEventListener("click",Se);async function ve(){try{Le();const{furnitures:e}=await re(),t=he(e);V.insertAdjacentHTML("beforeend",t),we()}catch{h.error({title:"Error",position:"topRight",message:"Oops! Something went wrong"})}finally{xe()}}function he(e){return e.map(({_id:t,name:r,color:n,price:o,images:i})=>{const s=n.map(a=>`<span class="gallery-item-color-pick" style="background-color:${a};"></span>`).join("");return`
    <li class="gallery-item swiper-slide" data-id="${t}">
        <img src="${i[0]}" alt="${r}" class="gallery-item-img"/>
        <div class="gallery-item-dscr">
            <p class="gallery-item-title">${r}</p>
            <div class="gallery-item-color" data-id="${n}">${s}</div>
             <p class="gallery-item-price">${o} грн</p>                    
        </div>
        <button type="button" class="gallery-item-info-btn">Детальніше</button>
    </li>`}).join("")}function Le(){K.classList.remove("hidden")}function xe(){K.classList.add("hidden")}function we(){const e=document.querySelector(".popular-products-swiper"),t=document.querySelector(".swiper-button-prev"),r=document.querySelector(".swiper-button-next");new U(e,{modules:[J,Q],slidesPerView:1,spaceBetween:16,loop:!1,navigation:{nextEl:r,prevEl:t},pagination:{el:".swiper-pagination",clickable:!0,dynamicBullets:!0},breakpoints:{768:{slidesPerView:2,spaceBetween:24},1440:{slidesPerView:4}},on:{init:function(){C(this,t,r)},slideChange:function(){C(this,t,r)}}})}function C(e,t,r){t.disabled=e.isBeginning,r.disabled=e.isEnd}function Se(e){const t=e.target.closest(".gallery-item-info-btn");if(!t)return;const n=t.closest(".gallery-item").dataset.id;F(n),I()}function _e(){const e={duration:350,showMultiple:!1,elementClass:"accordion-item",triggerClass:"accordion-trigger",panelClass:"accordion-panel",activeClass:"accordion-active"},t=new W(".accordion-list",e);return document.querySelectorAll(".accordion-item").forEach(r=>r.classList.add("js-enabled")),t}document.addEventListener("DOMContentLoaded",()=>{document.querySelector(".accordion-list")&&_e()});
//# sourceMappingURL=index.js.map
