import{a as l,i as b,S as _,N as A,P,A as Y}from"./assets/vendor-DyNIEbgu.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function r(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(s){if(s.ep)return;s.ep=!0;const n=r(s);fetch(s.href,n)}})();const x=document.querySelector(".burger-menu"),q=document.querySelector(".close-burger-menu"),f=document.querySelector(".menu-overlay"),H=document.body,Z=document.querySelectorAll(".navigation-item-menu, .go-shopping-button-menu");function O(e){e.key==="Escape"&&v()}function T(e){const t=e.target,r=t.closest(".header-menu-bg"),o=t.closest(".navigation-menu");r||o||isInsideNavAfterContent||v()}function ee(){f.classList.add("open"),H.classList.add("menu-open"),document.addEventListener("keydown",O),f.addEventListener("click",T)}function v(){f.classList.remove("open"),H.classList.remove("menu-open"),document.removeEventListener("keydown",O),f.removeEventListener("click",T)}x&&x.addEventListener("click",ee);q&&q.addEventListener("click",v);Z.forEach(e=>{e.addEventListener("click",v)});const d="https://furniture-store-v2.b.goit.study/api";async function te(){try{return(await l.get(`${d}/categories`)).data}catch(e){throw console.error("Error fetching categories:",e),e}}async function w(e=1){try{return(await l.get(`${d}/furnitures`,{params:{limit:8,page:e}})).data}catch(t){throw console.error("Error fetching default furniture:",t),t}}async function F(e,t=1){try{return(await l.get(`${d}/furnitures`,{params:{category:e,limit:8,page:t}})).data}catch(r){throw console.error(`Error fetching furniture for category ${e}:`,r),r}}async function re(e){try{return(await l.get(`${d}/furnitures/${e}`)).data}catch(t){throw console.error(`Error fetching furniture with id ${e}:`,t),t}}async function oe(){try{return(await l.get(`${d}/feedbacks`,{params:{limit:10}})).data}catch(e){throw console.error("Error fetching feedbacks:",e),e}}async function ne(e){try{const t=await l.post(`${d}/orders`,e);return console.log(t.data),t.data}catch(t){throw console.error("Error submitting order:",t),t}}async function se(){try{return(await l.get(`${d}/furnitures`,{params:{type:"popular"}})).data}catch(e){throw console.error("Error fetching popular furniture:",e),e}}let I=null,N=null;function D(e){I=e}function z(){return I}function ae(e){N=e}function ie(){return N}const g=document.querySelector(".modal-overlay"),ce=document.querySelector(".close-button"),m=document.querySelector(".order-form"),le=document.querySelector(".loader"),de=document.querySelectorAll(".user-input, .user-text"),ue=document.querySelector(".order-button");function h(){g.classList.remove("is-open"),document.body.style.overflow=""}function me(){g.classList.add("is-open"),document.body.style.overflow="hidden"}function j(){le.classList.toggle("hidden")}function C(){ue.classList.toggle("hidden")}ce.addEventListener("click",h);g.addEventListener("click",e=>{e.target===g&&h()});document.addEventListener("keydown",e=>{e.key==="Escape"&&h()});m.addEventListener("submit",fe);async function fe(e){e.preventDefault(),j(),C();const t=m.elements.username.value.trim(),r=m.elements["user-phone"].value.trim(),o=m.elements["form-comments"].value.trim(),s={name:t,phone:r,modelId:z(),color:ie(),comment:o};try{const n=await ne(s);console.log(n),n&&b.success({title:`Дякуємо, ${n.name}!`,message:`Замовлення №${n.orderNum} прийнято! Наш оператор зв'яжеться з вами найближчим часом.`,color:"green",position:"center",titleSize:"18px",messageSize:"18px"}),m.reset(),h()}catch(n){de.forEach(a=>{a.classList.add("error-message"),a.addEventListener("input",()=>{a.classList.remove("error-message")})}),b.error({title:"Помилка",message:`${n.response.data.message}`,color:"red",position:"center",closeOnClick:!0,titleSize:"18px",messageSize:"18px"})}finally{j(),C()}}const ge=document.querySelector(".js-modal-product"),V=ge.querySelector(".loader");async function R(){const e=z();if(e){ve();try{const t=await re(e);pe(t)}catch(t){console.error("Помилка завантаження товару:",t)}finally{he()}}}function pe(e){const t=document.querySelector(".js-modal-product"),r=t.querySelector(".product-modal");r.querySelector(".js-title").textContent=e.name,r.querySelector(".js-category").textContent=e.category.name,r.querySelector(".js-price").textContent=`${e.price} грн`,r.querySelector(".js-description").textContent=e.description,r.querySelector(".js-dimensions").textContent=`Розміри: ${e.sizes}`;const o=r.querySelector(".js-big-img");o.innerHTML=`<img src="${e.images[0]}" alt="${e.name}">`;const s=r.querySelector(".js-thumbs");s.innerHTML=`
    <img src="${e.images[1]}" alt="${e.name}">
    <img src="${e.images[2]}" alt="${e.name}">
  `;const n=r.querySelector(".js-colors");n.innerHTML=e.color.map((i,X)=>`
      <li>
        <label class="color-option">
          <input type="radio" name="color" value="${i}" ${X===0?"checked":""}/>
          <span class="color-swatch" style="background:${i}"></span>
        </label>
      </li>`).join(""),r.querySelector(".js-rating").innerHTML=ye(e.rate),t.classList.add("active"),setTimeout(()=>r.classList.add("animate-in"),10),document.body.style.overflow="hidden",n.addEventListener("change",i=>{i.target.name==="color"&&ae(i.target.value)}),r.querySelector(".js-to-order").addEventListener("click",()=>{p(),setTimeout(()=>{me()},350)})}function ye(e){const t=Math.floor(e),r=e%1!==0,o=5;let s="";for(let n=0;n<o;n++){let a="star-empty1";n<t?a="star-filled1":n===t&&r&&(a="star-half1"),s+=`
      <div class="star">
        <svg width="24" height="24" viewBox="0 0 34 32">
          <use href="./img/icons.svg#${a}"></use>
        </svg>
      </div>
    `}return`
    <div class="rating star-svg medium color-default">
      <div class="star-container">
        ${s}
      </div>
    </div>
  `}function p(){const e=document.querySelector(".js-modal-product");e.querySelector(".product-modal").classList.remove("animate-in"),setTimeout(()=>{e.classList.remove("active"),document.body.style.overflow=""},300)}document.addEventListener("click",e=>{e.target.closest(".js-close-product")&&p();const t=document.querySelector(".js-modal-product");e.target===t&&p()});window.addEventListener("keydown",e=>{e.key==="Escape"&&p()});function ve(){V.classList.remove("hidden")}function he(){V.classList.add("hidden")}const $=document.querySelector("ul.furniture-categories"),S=document.querySelector("ul.furniture-gallery"),u=document.querySelector("button.furniture-load-more-btn"),G=document.querySelector("span.loader"),K=[{id:"all",name:"Всі товари",image:{x1:"./img/furniture_list_section/all1x.jpg"}},{id:"66504a50a1b2c3d4e5f6a7b8",name:"М'які меблі",image:{x1:"./img/furniture_list_section/sofa1x.jpg"}},{id:"66504a50a1b2c3d4e5f6a7b9",name:"Шафи та системи зберігання",image:{x1:"./img/furniture_list_section/wardrobe1x.jpg"}},{id:"66504a50a1b2c3d4e5f6a7ba",name:"Ліжка та матраци",image:{x1:"./img/furniture_list_section/bed1x.jpg"}},{id:"66504a50a1b2c3d4e5f6a7bb",name:"Столи",image:{x1:"./img/furniture_list_section/table1x.jpg"}},{id:"66504a50a1b2c3d4e5f6a7bc",name:"Стільці та табурети",image:{x1:"./img/furniture_list_section/chairs1x.jpg"}},{id:"66504a50a1b2c3d4e5f6a7bd",name:"Кухні",image:{x1:"./img/furniture_list_section/kitchen1x.jpg"}},{id:"66504a50a1b2c3d4e5f6a7be",name:"Меблі для дитячої",image:{x1:"./img/furniture_list_section/kid1x.jpg"}},{id:"66504a50a1b2c3d4e5f6a7bf",name:"Меблі для офісу",image:{x1:"./img/furniture_list_section/office1x.jpg"}},{id:"66504a50a1b2c3d4e5f6a7c0",name:"Меблі для передпокою",image:{x1:"./img/furniture_list_section/entryway1x.jpg"}},{id:"66504a50a1b2c3d4e5f6a7c1",name:"Меблі для ванної кімнати",image:{x1:"./img/furniture_list_section/bathroom1x.jpg"}},{id:"66504a50a1b2c3d4e5f6a7c2",name:"Садові та вуличні меблі",image:{x1:"./img/furniture_list_section/garden1x.jpg"}},{id:"66504a50a1b2c3d4e5f6a7c3",name:"Декор та аксесуари",image:{x1:"./img/furniture_list_section/decor1x.jpg"}}],be=async()=>{try{let e=await te();$.insertAdjacentHTML("beforeend",K.filter(t=>t.id==="all"||e.find(r=>r._id===t.id)).map(({id:t,name:r,image:o})=>`
                    <li class="category-item">
                        <a class="category-link" data-category="${t}">
                            <div class="category-img-wrapper">
                                <img class="category-img" src="${o.x1}" alt="${r}"/>
                                <div class="category-overlay">${r}</div> 
                            </div>
                        </a>
                    </li>                
                    `).join(""))}catch(e){console.error("Помилка при заватаженні категорій: ",e)}},k=e=>{S.insertAdjacentHTML("beforeend",e.map(({_id:t,name:r,color:o,price:s,images:n})=>{const a=o.map(i=>`<span class="color-pick" style="background-color:${i};"></span>`).join("");return`
                <li class="gallery-item" data-id="${t}">
                    <img src="${n[0]}" alt="${r}" class="furniture-img"/>
                    <div class="gallery-item-dscr">
                        <p class="furniture-title">${r}</p>
                        <div class="color" data-id="${o}">${a}</div>
                        <p class="price">${s} грн</p>                    
                    </div>
                    <button type="button" class="gallery-item-info-btn">Детальніше</button>
                </li>
                `}).join(""))},Le=()=>{S.innerHTML=""},E=()=>{G.classList.remove("hidden")},y=()=>{G.classList.add("hidden")},U=e=>{$.querySelectorAll(".category-link").forEach(t=>{const r=t.getAttribute("data-category")===e;t.classList.toggle("active",r);const o=t.querySelector(".category-overlay");o&&(o.classList.remove("is-active"),r&&o.classList.add("is-active"))})};let c=1,L="all";document.addEventListener("DOMContentLoaded",async()=>{try{be(K),E();const e=await w(c);e.furnitures.length<8?u.disabled=!0:u.disabled=!1,k(e.furnitures),y(),U("all")}catch(e){console.error("Помилка при завантаженні меблів:",e),y()}});$.addEventListener("click",async e=>{const t=e.target.closest(".category-link");if(!t)return;const r=t.dataset.category;U(r),Le(),E();try{c=1,L=r;let o;r==="all"?o=await w(c):o=await F(r,c),o.furnitures.length<8?u.disabled=!0:u.disabled=!1,k(o.furnitures)}catch(o){console.error("Помилка при завантаженні меблів по категорії:",o)}finally{y()}});u.addEventListener("click",async()=>{c+=1,E();try{let e;L==="all"?e=await w(c):e=await F(L,c),e.furnitures.length<8&&(u.disabled=!0),k(e.furnitures)}catch(e){console.error("Помилка при завантаженні меблів:",e)}finally{y()}});S.addEventListener("click",e=>{if(e.target.classList.contains("gallery-item-info-btn")){const t=e.target.closest(".gallery-item").dataset.id;D(t),R()}});const J=document.querySelector(".popular-products-gallery"),Q=document.querySelector(".loader");document.addEventListener("DOMContentLoaded",we);J.addEventListener("click",xe);async function we(){try{Se();const{furnitures:e}=await se(),t=$e(e);J.insertAdjacentHTML("beforeend",t),Ee()}catch{b.error({title:"Error",position:"topRight",message:"Oops! Something went wrong"})}finally{ke()}}function $e(e){return e.map(({_id:t,name:r,color:o,price:s,images:n})=>{const a=o.map(i=>`<span class="popular-gallery-item-color-pick" style="background-color:${i};"></span>`).join("");return`
    <li class="popular-gallery-item swiper-slide" data-id="${t}">
        <img src="${n[0]}" alt="${r}" class="popular-gallery-item-img"/>
        <div class="popular-gallery-item-dscr">
            <p class="popular-gallery-item-title">${r}</p>
            <div class="popular-gallery-item-color" data-id="${o}">${a}</div>
             <p class="popular-gallery-item-price">${s} грн</p>                    
        </div>
        <button type="button" class="popular-gallery-item-info-btn">Детальніше</button>
    </li>`}).join("")}function Se(){Q.classList.remove("hidden")}function ke(){Q.classList.add("hidden")}function Ee(){const e=document.querySelector(".popular-products-swiper"),t=document.querySelector(".popular-products-prev"),r=document.querySelector(".popular-products-next");new _(e,{modules:[A,P],slidesPerView:1,spaceBetween:16,loop:!1,navigation:{nextEl:r,prevEl:t},pagination:{el:".popular-products-pagination",clickable:!0,dynamicBullets:!0},breakpoints:{768:{slidesPerView:2,spaceBetween:24},1440:{slidesPerView:4}},on:{init:function(){B(this,t,r)},slideChange:function(){B(this,t,r)}}})}function B(e,t,r){t.disabled=e.isBeginning,r.disabled=e.isEnd}function xe(e){const t=e.target.closest(".popular-gallery-item-info-btn");if(!t)return;const o=t.closest(".popular-gallery-item").dataset.id;D(o),R()}function qe(){const e={duration:350,showMultiple:!1,elementClass:"accordion-item",triggerClass:"accordion-trigger",panelClass:"accordion-panel",activeClass:"accordion-active"},t=new Y(".accordion-list",e);return document.querySelectorAll(".accordion-item").forEach(r=>r.classList.add("js-enabled")),t}document.addEventListener("DOMContentLoaded",()=>{document.querySelector(".accordion-list")&&qe()});const W=document.getElementById("loader");function je(){W.classList.remove("hidden")}function Ce(){W.classList.add("hidden")}function Be(e){return e>=3.3&&e<=3.7?3.5:e>=3.8&&e<=4.2?4:Math.round(e*2)/2}function Me(e){const t=Math.floor(e),r=e%1!==0,o=5;let s="";for(let n=0;n<o;n++){let a="star-empty1";n<t?a="star-filled1":n===t&&r&&(a="star-half1"),s+=`
      <div class="star">
        <svg width="24" height="24" viewBox="0 0 34 32">
          <use href="./img/icons.svg#${a}"></use>
        </svg>
      </div>
    `}return s}function _e(e){const t=document.getElementById("feedback-list");t.innerHTML="",e.forEach(r=>{const o=Be(r.rate),s=o%1!==0,i=`
        <li class="feedback-card swiper-slide">
            <div class="rating ${`value-${Math.floor(o)}`} ${s?"half":""} star-svg medium color-default">
              <div class="star-container">
                ${Me(o)}
              </div>
            </div>
            <p class="feedback-text">"${r.descr}"</p>
            <p class="feedback-author">${r.name}</p>
        </li>
    `;t.insertAdjacentHTML("beforeend",i)})}function Ae(){const e=document.querySelector(".feedback-slider.swiper"),t=document.querySelector(".feedback-prev"),r=document.querySelector(".feedback-next");new _(e,{modules:[A,P],loop:!1,spaceBetween:20,slidesPerView:1,pagination:{el:".feedback-pagination",clickable:!0},navigation:{nextEl:r,prevEl:t},breakpoints:{768:{slidesPerView:2,spaceBetween:30},1440:{slidesPerView:3,spaceBetween:40}},on:{init:function(){M(this,t,r)},slideChange:function(){M(this,t,r)}}})}function M(e,t,r){t.disabled=e.isBeginning,r.disabled=e.isEnd}async function Pe(){je();try{const e=await oe();let t;if(e&&Array.isArray(e.feedbacks))t=e.feedbacks;else if(Array.isArray(e))t=e;else{console.error("API повернуло дані в неочікуваному форматі:",e);return}_e(t),Ae()}catch(e){console.error("Помилка завантаження відгуків:",e)}finally{Ce()}}Pe();
//# sourceMappingURL=index.js.map
