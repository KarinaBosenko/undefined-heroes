import{a as m,A as P,i as _}from"./assets/vendor-CeEp1xzB.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(o){if(o.ep)return;o.ep=!0;const i=r(o);fetch(o.href,i)}})();const w=document.querySelector(".burger-menu"),x=document.querySelector(".close-burger-menu"),d=document.querySelector(".menu-overlay"),j=document.body,N=document.querySelectorAll(".navigation-item-menu, .go-shopping-button-menu");function q(e){e.key==="Escape"&&f()}function C(e){const t=e.target,r=t.closest(".header-menu-bg"),n=t.closest(".navigation-menu"),o=t.closest(".navigation-menu::after");r||n||o||f()}function z(){d.classList.add("open"),j.classList.add("menu-open"),document.addEventListener("keydown",q),d.addEventListener("click",C)}function f(){d.classList.remove("open"),j.classList.remove("menu-open"),document.removeEventListener("keydown",q),d.removeEventListener("click",C)}w&&w.addEventListener("click",z);x&&x.addEventListener("click",f);N.forEach(e=>{e.addEventListener("click",f)});const g="https://furniture-store-v2.b.goit.study/api";async function D(){try{return(await m.get(`${g}/categories`)).data}catch(e){throw console.error("Error fetching categories:",e),e}}async function v(e=1){try{return(await m.get(`${g}/furnitures`,{params:{limit:8,page:e}})).data}catch(t){throw console.error("Error fetching default furniture:",t),t}}async function A(e,t=1){try{return(await m.get(`${g}/furnitures`,{params:{category:e,limit:8,page:t}})).data}catch(r){throw console.error(`Error fetching furniture for category ${e}:`,r),r}}async function H(e){try{const t=await m.post(`${g}/orders`,e);return console.log(t.data),t.data}catch(t){throw console.error("Error submitting order:",t),t}}let M=null,T=null;function G(e){M=e}function K(){return M}function R(){return T}const h=document.querySelector("ul.furniture-categories"),L=document.querySelector("ul.furniture-gallery"),c=document.querySelector("button.furniture-load-more-btn"),O=document.querySelector("span.loader"),B=[{id:"all",name:"Всі товари",image:"./img/furniture_list_section/all1x-min.jpg"},{id:"66504a50a1b2c3d4e5f6a7b8",name:"М'які меблі",image:"./img/furniture_list_section/sofa1x-min.jpg"},{id:"66504a50a1b2c3d4e5f6a7b9",name:"Шафи та системи зберігання",image:"./img/furniture_list_section/wardrobe1x-min.jpg"},{id:"66504a50a1b2c3d4e5f6a7ba",name:"Ліжка та матраци",image:"./img/furniture_list_section/bed1x-min.jpg"},{id:"66504a50a1b2c3d4e5f6a7bb",name:"Столи",image:"./img/furniture_list_section/table1x-min.jpg"},{id:"66504a50a1b2c3d4e5f6a7bc",name:"Стільці та табурети",image:"./img/furniture_list_section/chairs1x-min.jpg"},{id:"66504a50a1b2c3d4e5f6a7bd",name:"Кухні",image:"./img/furniture_list_section/kitchen1x-min.jpg"},{id:"66504a50a1b2c3d4e5f6a7be",name:"Меблі для дитячої",image:"./img/furniture_list_section/kid1x-min.jpg"},{id:"66504a50a1b2c3d4e5f6a7bf",name:"Меблі для офісу",image:"./img/furniture_list_section/office1x-min.jpg"},{id:"66504a50a1b2c3d4e5f6a7c0",name:"Меблі для передпокою",image:"./img/furniture_list_section/entryway1x-min.jpg"},{id:"66504a50a1b2c3d4e5f6a7c1",name:"Меблі для ванної кімнати",image:"./img/furniture_list_section/bathroom1x-min.jpg"},{id:"66504a50a1b2c3d4e5f6a7c2",name:"Садові та вуличні меблі",image:"./img/furniture_list_section/garden1x-min.jpg"},{id:"66504a50a1b2c3d4e5f6a7c3",name:"Декор та аксесуари",image:"./img/furniture_list_section/decor1x-min.jpg"}],U=async()=>{try{let e=await D();h.insertAdjacentHTML("beforeend",B.filter(t=>t.id==="all"||e.find(r=>r._id===t.id)).map(({id:t,name:r,image:n})=>`
                    <li class="category-item">
                        <a class="category-link" data-category="${t}">
                            <div class="category-img-wrapper">
                                <img class="category-img" src="${n}" srcset="${n} 1x, ${n.replace("1x","2x")} 2x" alt="${r}"/>
                                <div class="category-overlay">${r}</div> 
                            </div>
                        </a>
                    </li>                
                    `).join(""))}catch(e){console.error("Помилка при заватаженні категорій: ",e)}},E=e=>{L.insertAdjacentHTML("beforeend",e.map(({_id:t,name:r,color:n,price:o,images:i})=>{const a=n.map(I=>`<span class="color-pick" style="background-color:${I};"></span>`).join("");return`
                <li class="gallery-item" data-id="${t}">
                    <img src="${i[0]}" alt="${r}" class="furniture-img"/>
                    <div class="gallery-item-dscr">
                        <p class="furniture-title">${r}</p>
                        <div class="color" data-id="${n}">${a}</div>
                        <p class="price">${o} грн</p>                    
                    </div>
                    <button type="button" class="gallery-item-info-btn">Детальніше</button>
                </li>
                `}).join(""))},J=()=>{L.innerHTML=""},S=()=>{O.classList.remove("hidden")},u=()=>{O.classList.add("hidden")},F=e=>{h.querySelectorAll(".category-link").forEach(t=>{const r=t.getAttribute("data-category")===e;t.classList.toggle("active",r);const n=t.querySelector(".category-overlay");n&&(n.classList.remove("is-active"),r&&n.classList.add("is-active"))})};let s=1,p="all";document.addEventListener("DOMContentLoaded",async()=>{try{U(B),S();const e=await v(s);e.furnitures.length<8?c.disabled=!0:c.disabled=!1,E(e.furnitures),u(),F("all")}catch(e){console.error("Помилка при завантаженні меблів:",e),u()}});h.addEventListener("click",async e=>{const t=e.target.closest(".category-link");if(!t)return;const r=t.dataset.category;F(r),J(),S();try{s=1,p=r;let n;r==="all"?n=await v(s):n=await A(r,s),n.furnitures.length<8?c.disabled=!0:c.disabled=!1,E(n.furnitures)}catch(n){console.error("Помилка при завантаженні меблів по категорії:",n)}finally{u()}});c.addEventListener("click",async()=>{s+=1,S();try{let e;p==="all"?e=await v(s):e=await A(p,s),e.furnitures.length<8&&(c.disabled=!0),E(e.furnitures)}catch(e){console.error("Помилка при завантаженні меблів:",e)}finally{u()}});L.addEventListener("click",e=>{if(e.target.classList.contains("gallery-item-info-btn")){const t=e.target.closest(".gallery-item").dataset.id;G(t),openDetailsModal()}});function Q(){const e={duration:350,showMultiple:!1,elementClass:"accordion-item",triggerClass:"accordion-trigger",panelClass:"accordion-panel",activeClass:"accordion-active"},t=new P(".accordion-list",e);return document.querySelectorAll(".accordion-item").forEach(r=>r.classList.add("js-enabled")),t}document.addEventListener("DOMContentLoaded",()=>{document.querySelector(".accordion-list")&&Q()});const b=document.querySelector(".modal-overlay"),V=document.querySelector(".close-button"),l=document.querySelector(".order-form"),W=document.querySelector(".loader"),X=document.querySelectorAll(".user-input, .user-text"),Y=document.querySelector(".order-button");function y(){b.classList.remove("is-open"),document.body.style.overflow=""}function $(){W.classList.toggle("hidden")}function k(){Y.classList.toggle("hidden")}V.addEventListener("click",y);b.addEventListener("click",e=>{e.target===b&&y()});document.addEventListener("keydown",e=>{e.key==="Escape"&&y()});l.addEventListener("submit",Z);async function Z(e){e.preventDefault(),$(),k();const t=l.elements.username.value.trim(),r=l.elements["user-phone"].value.trim(),n=l.elements["form-comments"].value.trim(),o={name:t,phone:r,modelId:K(),color:R(),comment:n};try{const i=await H(o);console.log(i),i&&_.success({title:`Дякуємо, ${i.name}!`,message:`Замовлення №${i.orderNum} прийнято! Наш оператор зв'яжеться з вами найближчим часом.`,color:"green",position:"center",titleSize:"18px",messageSize:"18px"}),l.reset(),y()}catch(i){X.forEach(a=>{a.classList.add("error-message"),a.addEventListener("input",()=>{a.classList.remove("error-message")})}),_.error({title:"Помилка",message:`${i.response.data.message}`,color:"red",position:"center",closeOnClick:!0,titleSize:"18px",messageSize:"18px"})}finally{$(),k()}}
//# sourceMappingURL=index.js.map
