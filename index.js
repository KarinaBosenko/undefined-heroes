import{a as d,i as c,S as _,N as A,P,A as Y}from"./assets/vendor-DaBFZYBc.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const n of i)if(n.type==="childList")for(const s of n.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function r(i){const n={};return i.integrity&&(n.integrity=i.integrity),i.referrerPolicy&&(n.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?n.credentials="include":i.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(i){if(i.ep)return;i.ep=!0;const n=r(i);fetch(i.href,n)}})();const E=document.querySelector(".burger-menu"),j=document.querySelector(".close-burger-menu"),g=document.querySelector(".menu-overlay"),H=document.body,Z=document.querySelectorAll(".navigation-item-menu, .go-shopping-button-menu");function O(e){e.key==="Escape"&&v()}function T(e){const t=e.target,r=t.closest(".header-menu-bg"),o=t.closest(".navigation-menu");r||o||isInsideNavAfterContent||v()}function ee(){g.classList.add("open"),H.classList.add("menu-open"),document.addEventListener("keydown",O),g.addEventListener("click",T)}function v(){g.classList.remove("open"),H.classList.remove("menu-open"),document.removeEventListener("keydown",O),g.removeEventListener("click",T)}E&&E.addEventListener("click",ee);j&&j.addEventListener("click",v);Z.forEach(e=>{e.addEventListener("click",v)});const u="https://furniture-store-v2.b.goit.study/api";async function te(){try{return(await d.get(`${u}/categories`)).data}catch(e){throw console.error("Error fetching categories:",e),e}}async function w(e=1){try{return(await d.get(`${u}/furnitures`,{params:{limit:8,page:e}})).data}catch(t){throw console.error("Error fetching default furniture:",t),t}}async function F(e,t=1){try{return(await d.get(`${u}/furnitures`,{params:{category:e,limit:8,page:t}})).data}catch(r){throw console.error(`Error fetching furniture for category ${e}:`,r),r}}async function re(e){try{return(await d.get(`${u}/furnitures/${e}`)).data}catch(t){throw console.error(`Error fetching furniture with id ${e}:`,t),t}}async function oe(){try{return(await d.get(`${u}/feedbacks`,{params:{limit:10}})).data}catch(e){throw console.error("Error fetching feedbacks:",e),e}}async function ne(e){try{const t=await d.post(`${u}/orders`,e);return console.log(t.data),t.data}catch(t){throw console.error("Error submitting order:",t),t}}async function ie(){try{return(await d.get(`${u}/furnitures`,{params:{type:"popular"}})).data}catch(e){throw console.error("Error fetching popular furniture:",e),e}}let I=null,N=null;function R(e){I=e}function D(){return I}function se(e){N=e}function ae(){return N}const p=document.querySelector(".modal-overlay"),ce=document.querySelector(".close-button"),f=document.querySelector(".order-form"),le=document.querySelector(".loader"),de=document.querySelectorAll(".user-input, .user-text"),ue=document.querySelector(".order-button");function b(){p.classList.remove("is-open"),document.body.style.overflow=""}function me(){p.classList.add("is-open"),document.body.style.overflow="hidden"}function q(){le.classList.toggle("hidden")}function C(){ue.classList.toggle("hidden")}ce.addEventListener("click",b);p.addEventListener("click",e=>{e.target===p&&b()});document.addEventListener("keydown",e=>{e.key==="Escape"&&b()});f.addEventListener("submit",fe);async function fe(e){e.preventDefault(),q(),C();const t=f.elements.username.value.trim(),r=f.elements["user-phone"].value.trim(),o=f.elements["form-comments"].value.trim(),i={name:t,phone:r,modelId:D(),color:ae(),comment:o};try{const n=await ne(i);console.log(n),n&&c.success({title:`Дякуємо, ${n.name}!`,message:`Замовлення №${n.orderNum} прийнято! Наш оператор зв'яжеться з вами найближчим часом.`,color:"green",position:"center",titleSize:"18px",messageSize:"18px"}),f.reset(),b()}catch(n){de.forEach(s=>{s.classList.add("error-message"),s.addEventListener("input",()=>{s.classList.remove("error-message")})}),c.error({title:"Помилка",message:`${n.response.data.message}`,color:"red",position:"center",closeOnClick:!0,titleSize:"18px",messageSize:"18px"})}finally{q(),C()}}const ge=document.querySelector(".js-modal-product"),z=ge.querySelector(".loader");async function V(){const e=D();if(e){he();try{const t=await re(e);pe(t)}catch(t){c.error({title:"Error",position:"topRight",message:`Помилка завантаження товару: ${t}`})}finally{ve()}}}function pe(e){const t=document.querySelector(".js-modal-product"),r=t.querySelector(".product-modal");r.querySelector(".js-title").textContent=e.name,r.querySelector(".js-category").textContent=e.category.name,r.querySelector(".js-price").textContent=`${e.price} грн`,r.querySelector(".js-description").textContent=e.description,r.querySelector(".js-dimensions").textContent=`Розміри: ${e.sizes}`;const o=r.querySelector(".js-big-img");o.innerHTML=`<img src="${e.images[0]}" alt="${e.name}">`;const i=r.querySelector(".js-thumbs");i.innerHTML=`
    <img src="${e.images[1]}" alt="${e.name}">
    <img src="${e.images[2]}" alt="${e.name}">
  `;const n=r.querySelector(".js-colors");n.innerHTML=e.color.map((a,X)=>`
      <li>
        <label class="color-option">
          <input type="radio" name="color" value="${a}" ${X===0?"checked":""}/>
          <span class="color-swatch" style="background:${a}"></span>
        </label>
      </li>`).join(""),r.querySelector(".js-rating").innerHTML=ye(e.rate),t.classList.add("active"),setTimeout(()=>r.classList.add("animate-in"),10),document.body.style.overflow="hidden",n.addEventListener("change",a=>{a.target.name==="color"&&se(a.target.value)}),r.querySelector(".js-to-order").addEventListener("click",()=>{y(),setTimeout(()=>{me()},350)})}function ye(e){const t=Math.floor(e),r=e%1!==0,o=5;let i="";for(let n=0;n<o;n++){let s="star-empty";n<t?s="star-filled":n===t&&r&&(s="star-half"),i+=`
      <div class="star">
        <svg width="24" height="24" viewBox="0 0 34 32">
          <use href="./img/icons-sprite.svg#${s}"></use>
        </svg>
      </div>
    `}return`
    <div class="rating star-svg medium color-default">
      <div class="star-container">
        ${i}
      </div>
    </div>
  `}function y(){const e=document.querySelector(".js-modal-product");e.querySelector(".product-modal").classList.remove("animate-in"),setTimeout(()=>{e.classList.remove("active"),document.body.style.overflow=""},300)}document.addEventListener("click",e=>{e.target.closest(".js-close-product")&&y();const t=document.querySelector(".js-modal-product");e.target===t&&y()});window.addEventListener("keydown",e=>{e.key==="Escape"&&y()});function he(){z.classList.remove("hidden")}function ve(){z.classList.add("hidden")}const x=document.querySelector("ul.furniture-categories"),$=document.querySelector("ul.furniture-gallery"),m=document.querySelector("button.furniture-load-more-btn"),G=document.querySelector("span.loader"),K=[{id:"all",name:"Всі товари",image:{x1:"./img/furniture_list/all1x.jpg",x2:"/img/furniture_list/all2x-min.jpg"}},{id:"66504a50a1b2c3d4e5f6a7b8",name:"М'які меблі",image:{x1:"./img/furniture_list/sofa1x.jpg",x2:"/img/furniture_list/sofa2x-min.jpg"}},{id:"66504a50a1b2c3d4e5f6a7b9",name:"Шафи та системи зберігання",image:{x1:"./img/furniture_list/wardrobe1x.jpg",x2:"/img/furniture_list/wardrobe2x-min.jpg"}},{id:"66504a50a1b2c3d4e5f6a7ba",name:"Ліжка та матраци",image:{x1:"./img/furniture_list/bed1x.jpg",x2:"/img/furniture_list/bed2x-min.jpg"}},{id:"66504a50a1b2c3d4e5f6a7bb",name:"Столи",image:{x1:"./img/furniture_list/table1x.jpg",x2:"/img/furniture_list/table2x-min.jpg"}},{id:"66504a50a1b2c3d4e5f6a7bc",name:"Стільці та табурети",image:{x1:"./img/furniture_list/chairs1x.jpg",x2:"/img/furniture_list/chairs2x-min.jpg"}},{id:"66504a50a1b2c3d4e5f6a7bd",name:"Кухні",image:{x1:"./img/furniture_list/kitchen1x.jpg",x2:"/img/furniture_list/kitchen2x-min.jpg"}},{id:"66504a50a1b2c3d4e5f6a7be",name:"Меблі для дитячої",image:{x1:"./img/furniture_list/kid1x.jpg",x2:"/img/furniture_list/kid2x-min.jpg"}},{id:"66504a50a1b2c3d4e5f6a7bf",name:"Меблі для офісу",image:{x1:"./img/furniture_list/office1x.jpg",x2:"/img/furniture_list/office2x-min.jpg"}},{id:"66504a50a1b2c3d4e5f6a7c0",name:"Меблі для передпокою",image:{x1:"./img/furniture_list/entryway1x.jpg",x2:"/img/furniture_list/entryway2x-min.jpg"}},{id:"66504a50a1b2c3d4e5f6a7c1",name:"Меблі для ванної кімнати",image:{x1:"./img/furniture_list/bathroom1x.jpg",x2:"/img/furniture_list/bathroom2x-min.jpg"}},{id:"66504a50a1b2c3d4e5f6a7c2",name:"Садові та вуличні меблі",image:{x1:"./img/furniture_list/garden1x.jpg",x2:"/img/furniture_list/garden2x-min.jpg"}},{id:"66504a50a1b2c3d4e5f6a7c3",name:"Декор та аксесуари",image:{x1:"./img/furniture_list/decor1x.jpg",x2:"/img/furniture_list/decor2x-min.jpg"}}],be=async()=>{try{let e=await te();x.insertAdjacentHTML("beforeend",K.filter(t=>t.id==="all"||e.find(r=>r._id===t.id)).map(({id:t,name:r,image:o})=>`
                    <li class="category-item">
                        <a class="category-link" data-category="${t}">
                            <div class="category-img-wrapper">
                                <img class="category-img" src="${o.x1}"  srcset="${o.x1} 1x, ${o.x2} 2x" alt="${r}"/>
                                <div class="category-overlay">${r}</div> 
                            </div>
                        </a>
                    </li>                
                    `).join(""))}catch{c.error({title:"Error",message:"Oops! Something went wrong",position:"topRight"})}},S=e=>{$.insertAdjacentHTML("beforeend",e.map(({_id:t,name:r,color:o,price:i,images:n})=>{const s=o.map(a=>`<span class="color-pick" style="background-color:${a};"></span>`).join("");return`
                <li class="gallery-item" data-id="${t}">
                    <img src="${n[0]}" alt="${r}" class="furniture-img"/>
                    <div class="gallery-item-dscr">
                        <p class="furniture-title">${r}</p>
                        <div class="color" data-id="${o}">${s}</div>
                        <p class="price">${i} грн</p>                    
                    </div>
                    <button type="button" class="gallery-item-info-btn">Детальніше</button>
                </li>
                `}).join(""))},Le=()=>{$.innerHTML=""},k=()=>{G.classList.remove("hidden")},h=()=>{G.classList.add("hidden")},U=e=>{x.querySelectorAll(".category-link").forEach(t=>{const r=t.getAttribute("data-category")===e;t.classList.toggle("active",r);const o=t.querySelector(".category-overlay");o&&(o.classList.remove("is-active"),r&&o.classList.add("is-active"))})};let l=1,L="all";document.addEventListener("DOMContentLoaded",async()=>{try{be(K),k();const e=await w(l);e.furnitures.length<8?m.disabled=!0:m.disabled=!1,S(e.furnitures),h(),U("all")}catch(e){c.error({title:"Error",message:`Помилка при завантаженні меблів: ${e}`,position:"topRight"}),h()}});x.addEventListener("click",async e=>{const t=e.target.closest(".category-link");if(!t)return;const r=t.dataset.category;U(r),Le(),k();try{l=1,L=r;let o;r==="all"?o=await w(l):o=await F(r,l),o.furnitures.length<8?m.disabled=!0:m.disabled=!1,S(o.furnitures)}catch(o){c.error({title:"Error",message:`Помилка при завантаженні меблів по категорії: ${o}`,position:"topRight"})}finally{h()}});m.addEventListener("click",async()=>{l+=1,k();try{let e;L==="all"?e=await w(l):e=await F(L,l),e.furnitures.length<8&&(m.disabled=!0),S(e.furnitures)}catch(e){c.error({title:"Error",message:`Помилка при завантаженні меблів: ${e}`,position:"topRight"})}finally{h()}});$.addEventListener("click",e=>{if(e.target.classList.contains("gallery-item-info-btn")){const t=e.target.closest(".gallery-item").dataset.id;R(t),V()}});const J=document.querySelector(".popular-products-gallery"),Q=document.querySelector(".loader");document.addEventListener("DOMContentLoaded",we);J.addEventListener("click",Ee);async function we(){try{$e();const{furnitures:e}=await ie(),t=xe(e);J.insertAdjacentHTML("beforeend",t),ke()}catch{c.error({title:"Error",position:"topRight",message:"Oops! Something went wrong"})}finally{Se()}}function xe(e){return e.map(({_id:t,name:r,color:o,price:i,images:n})=>{const s=o.map(a=>`<span class="popular-gallery-item-color-pick" style="background-color:${a};"></span>`).join("");return`
    <li class="popular-gallery-item swiper-slide" data-id="${t}">
        <img src="${n[0]}" alt="${r}" class="popular-gallery-item-img"/>
        <div class="popular-gallery-item-dscr">
            <p class="popular-gallery-item-title">${r}</p>
            <div class="popular-gallery-item-color" data-id="${o}">${s}</div>
             <p class="popular-gallery-item-price">${i} грн</p>                    
        </div>
        <button type="button" class="popular-gallery-item-info-btn">Детальніше</button>
    </li>`}).join("")}function $e(){Q.classList.remove("hidden")}function Se(){Q.classList.add("hidden")}function ke(){const e=document.querySelector(".popular-products-swiper"),t=document.querySelector(".popular-products-prev"),r=document.querySelector(".popular-products-next");new _(e,{modules:[A,P],slidesPerView:1,spaceBetween:16,loop:!1,navigation:{nextEl:r,prevEl:t},pagination:{el:".popular-products-pagination",clickable:!0,dynamicBullets:!0},breakpoints:{768:{slidesPerView:2,spaceBetween:24},1440:{slidesPerView:4}},on:{init:function(){B(this,t,r)},slideChange:function(){B(this,t,r)}}})}function B(e,t,r){t.disabled=e.isBeginning,r.disabled=e.isEnd}function Ee(e){const t=e.target.closest(".popular-gallery-item-info-btn");if(!t)return;const o=t.closest(".popular-gallery-item").dataset.id;R(o),V()}function je(){const e={duration:350,showMultiple:!1,elementClass:"accordion-item",triggerClass:"accordion-trigger",panelClass:"accordion-panel",activeClass:"accordion-active"},t=new Y(".accordion-list",e);return document.querySelectorAll(".accordion-item").forEach(r=>r.classList.add("js-enabled")),t}document.addEventListener("DOMContentLoaded",()=>{document.querySelector(".accordion-list")&&je()});const W=document.getElementById("loader");function qe(){W.classList.remove("hidden")}function Ce(){W.classList.add("hidden")}function Be(e){return e>=3.3&&e<=3.7?3.5:e>=3.8&&e<=4.2?4:Math.round(e*2)/2}function Me(e){const t=Math.floor(e),r=e%1!==0,o=5;let i="";for(let n=0;n<o;n++){let s="star-empty";n<t?s="star-filled":n===t&&r&&(s="star-half"),i+=`
      <div class="star">
        <svg width="24" height="24" viewBox="0 0 34 32">
          <use href="./img/icons-sprite.svg#${s}"></use>
        </svg>
      </div>
    `}return i}function _e(e){const t=document.getElementById("feedback-list");t.innerHTML="",e.forEach(r=>{const o=Be(r.rate),i=o%1!==0,a=`
        <li class="feedback-card swiper-slide">
            <div class="rating ${`value-${Math.floor(o)}`} ${i?"half":""} star-svg medium color-default">
              <div class="star-container">
                ${Me(o)}
              </div>
            </div>
            <p class="feedback-text">"${r.descr}"</p>
            <p class="feedback-author">${r.name}</p>
        </li>
    `;t.insertAdjacentHTML("beforeend",a)})}function Ae(){const e=document.querySelector(".feedback-slider.swiper"),t=document.querySelector(".feedback-prev"),r=document.querySelector(".feedback-next");new _(e,{modules:[A,P],loop:!1,spaceBetween:20,slidesPerView:1,pagination:{el:".feedback-pagination",clickable:!0},navigation:{nextEl:r,prevEl:t},breakpoints:{768:{slidesPerView:2,spaceBetween:30},1440:{slidesPerView:3,spaceBetween:40}},on:{init:function(){M(this,t,r)},slideChange:function(){M(this,t,r)}}})}function M(e,t,r){t.disabled=e.isBeginning,r.disabled=e.isEnd}async function Pe(){qe();try{const e=await oe();let t;if(e&&Array.isArray(e.feedbacks))t=e.feedbacks;else if(Array.isArray(e))t=e;else{console.error("API повернуло дані в неочікуваному форматі:",e);return}_e(t),Ae()}catch(e){c.error({title:"Error",position:"topRight",message:`Помилка завантаження відгуків: ${e}`})}finally{Ce()}}Pe();
//# sourceMappingURL=index.js.map
