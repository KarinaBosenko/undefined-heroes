import{a as u,i as w,A as D}from"./assets/vendor-Bb_yd2DG.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(o){if(o.ep)return;o.ep=!0;const i=r(o);fetch(o.href,i)}})();const $=document.querySelector(".burger-menu"),E=document.querySelector(".close-burger-menu"),g=document.querySelector(".menu-overlay"),C=document.body,G=document.querySelectorAll(".navigation-item-menu, .go-shopping-button-menu");function M(e){e.key==="Escape"&&b()}function A(e){const t=e.target,r=t.closest(".header-menu-bg"),n=t.closest(".navigation-menu"),o=t.closest(".navigation-menu::after");r||n||o||b()}function K(){g.classList.add("open"),C.classList.add("menu-open"),document.addEventListener("keydown",M),g.addEventListener("click",A)}function b(){g.classList.remove("open"),C.classList.remove("menu-open"),document.removeEventListener("keydown",M),g.removeEventListener("click",A)}$&&$.addEventListener("click",K);E&&E.addEventListener("click",b);G.forEach(e=>{e.addEventListener("click",b)});const m="https://furniture-store-v2.b.goit.study/api";async function R(){try{return(await u.get(`${m}/categories`)).data}catch(e){throw console.error("Error fetching categories:",e),e}}async function x(e=1){try{return(await u.get(`${m}/furnitures`,{params:{limit:8,page:e}})).data}catch(t){throw console.error("Error fetching default furniture:",t),t}}async function O(e,t=1){try{return(await u.get(`${m}/furnitures`,{params:{category:e,limit:8,page:t}})).data}catch(r){throw console.error(`Error fetching furniture for category ${e}:`,r),r}}async function U(e){try{return(await u.get(`${m}/furnitures/${e}`)).data}catch(t){throw console.error(`Error fetching furniture with id ${e}:`,t),t}}async function J(e){try{const t=await u.post(`${m}/orders`,e);return console.log(t.data),t.data}catch(t){throw console.error("Error submitting order:",t),t}}let B=null,T=null;function Q(e){B=e}function F(){return B}function V(e){T=e}function W(){return T}const f=document.querySelector(".modal-overlay"),X=document.querySelector(".close-button"),d=document.querySelector(".order-form"),Y=document.querySelector(".loader"),Z=document.querySelectorAll(".user-input, .user-text"),ee=document.querySelector(".order-button");function v(){f.classList.remove("is-open"),document.body.style.overflow=""}function te(){f.classList.add("is-open"),document.body.style.overflow="hidden"}function q(){Y.classList.toggle("hidden")}function k(){ee.classList.toggle("hidden")}X.addEventListener("click",v);f.addEventListener("click",e=>{e.target===f&&v()});document.addEventListener("keydown",e=>{e.key==="Escape"&&v()});d.addEventListener("submit",re);async function re(e){e.preventDefault(),q(),k();const t=d.elements.username.value.trim(),r=d.elements["user-phone"].value.trim(),n=d.elements["form-comments"].value.trim(),o={name:t,phone:r,modelId:F(),color:W(),comment:n};try{const i=await J(o);console.log(i),i&&w.success({title:`Дякуємо, ${i.name}!`,message:`Замовлення №${i.orderNum} прийнято! Наш оператор зв'яжеться з вами найближчим часом.`,color:"green",position:"center",titleSize:"18px",messageSize:"18px"}),d.reset(),v()}catch(i){Z.forEach(s=>{s.classList.add("error-message"),s.addEventListener("input",()=>{s.classList.remove("error-message")})}),w.error({title:"Помилка",message:`${i.response.data.message}`,color:"red",position:"center",closeOnClick:!0,titleSize:"18px",messageSize:"18px"})}finally{q(),k()}}const ne=document.querySelector(".js-modal-product"),I=ne.querySelector(".loader");async function oe(){const e=F();if(e){ae();try{const t=await U(e);ie(t)}catch(t){console.error("Помилка завантаження товару:",t)}finally{ce()}}}function ie(e){const t=document.querySelector(".js-modal-product"),r=t.querySelector(".product-modal");r.querySelector(".js-title").textContent=e.name,r.querySelector(".js-category").textContent=e.category.name,r.querySelector(".js-price").textContent=`${e.price} грн`,r.querySelector(".js-description").textContent=e.description,r.querySelector(".js-dimensions").textContent=`Розміри: ${e.sizes}`;const n=r.querySelector(".js-big-img");n.innerHTML=`<img src="${e.images[0]}" alt="${e.name}">`;const o=r.querySelector(".js-thumbs");o.innerHTML=`
    <img src="${e.images[1]}" alt="${e.name}">
    <img src="${e.images[2]}" alt="${e.name}">
  `;const i=r.querySelector(".js-colors");i.innerHTML=e.color.map((a,N)=>`
      <li>
        <label class="color-option">
          <input type="radio" name="color" value="${a}" ${N===0?"checked":""}/>
          <span class="color-swatch" style="background:${a}"></span>
        </label>
      </li>`).join(""),r.querySelector(".js-rating").innerHTML=se(e.rate),t.classList.add("active"),setTimeout(()=>r.classList.add("animate-in"),10),document.body.style.overflow="hidden",i.addEventListener("change",a=>{a.target.name==="color"&&V(a.target.value)}),r.querySelector(".js-to-order").addEventListener("click",()=>{y(),setTimeout(()=>{te()},350)})}function se(e){const t=Math.floor(e),r=5-t;return"★".repeat(t)+"☆".repeat(r)}function y(){const e=document.querySelector(".js-modal-product");e.querySelector(".product-modal").classList.remove("animate-in"),setTimeout(()=>{e.classList.remove("active"),document.body.style.overflow=""},300)}document.addEventListener("click",e=>{e.target.closest(".js-close-product")&&y();const t=document.querySelector(".js-modal-product");e.target===t&&y()});window.addEventListener("keydown",e=>{e.key==="Escape"&&y()});function ae(){I.classList.remove("hidden")}function ce(){I.classList.add("hidden")}const L=document.querySelector("ul.furniture-categories"),_=document.querySelector("ul.furniture-gallery"),l=document.querySelector("button.furniture-load-more-btn"),H=document.querySelector("span.loader"),P=[{id:"all",name:"Всі товари",image:{x1:"./img/furniture_list_section/all1x-min.jpg",x2:"./img/furniture_list_section/all2x-min.jpg"}},{id:"66504a50a1b2c3d4e5f6a7b8",name:"М'які меблі",image:{x1:"./img/furniture_list_section/sofa1x-min.jpg",x2:"./img/furniture_list_section/sofa2x-min.jpg"}},{id:"66504a50a1b2c3d4e5f6a7b9",name:"Шафи та системи зберігання",image:{x1:"./img/furniture_list_section/wardrobe1x-min.jpg",x2:"./img/furniture_list_section/wardrobe2x-min.jpg"}},{id:"66504a50a1b2c3d4e5f6a7ba",name:"Ліжка та матраци",image:{x1:"./img/furniture_list_section/bed1x-min.jpg",x2:"./img/furniture_list_section/bed2x-min.jpg"}},{id:"66504a50a1b2c3d4e5f6a7bb",name:"Столи",image:{x1:"./img/furniture_list_section/table1x-min.jpg",x2:"./img/furniture_list_section/table2x-min.jpg"}},{id:"66504a50a1b2c3d4e5f6a7bc",name:"Стільці та табурети",image:{x1:"./img/furniture_list_section/chairs1x-min.jpg",x2:"./img/furniture_list_section/chairs2x-min.jpg"}},{id:"66504a50a1b2c3d4e5f6a7bd",name:"Кухні",image:{x1:"./img/furniture_list_section/kitchen1x-min.jpg",x2:"./img/furniture_list_section/kitchen2x-min.jpg"}},{id:"66504a50a1b2c3d4e5f6a7be",name:"Меблі для дитячої",image:{x1:"./img/furniture_list_section/kid1x-min.jpg",x2:"./img/furniture_list_section/kid2x-min.jpg"}},{id:"66504a50a1b2c3d4e5f6a7bf",name:"Меблі для офісу",image:{x1:"./img/furniture_list_section/office1x-min.jpg",x2:"./img/furniture_list_section/office2x-min.jpg"}},{id:"66504a50a1b2c3d4e5f6a7c0",name:"Меблі для передпокою",image:{x1:"./img/furniture_list_section/entryway1x-min.jpg",x2:"./img/furniture_list_section/entryway2x-min.jpg"}},{id:"66504a50a1b2c3d4e5f6a7c1",name:"Меблі для ванної кімнати",image:{x1:"./img/furniture_list_section/bathroom1x-min.jpg",x2:"./img/furniture_list_section/bathroom2x-min.jpg"}},{id:"66504a50a1b2c3d4e5f6a7c2",name:"Садові та вуличні меблі",image:{x1:"./img/furniture_list_section/garden1x-min.jpg",x2:"./img/furniture_list_section/garden2x-min.jpg"}},{id:"66504a50a1b2c3d4e5f6a7c3",name:"Декор та аксесуари",image:{x1:"./img/furniture_list_section/decor1x-min.jpg",x2:"./img/furniture_list_section/decor2x-min.jpg"}}],le=async()=>{try{let e=await R();L.insertAdjacentHTML("beforeend",P.filter(t=>t.id==="all"||e.find(r=>r._id===t.id)).map(({id:t,name:r,image:n})=>`
                    <li class="category-item">
                        <a class="category-link" data-category="${t}">
                            <div class="category-img-wrapper">
                                <img class="category-img" src="${n.x1}" srcset="${n.x1} 1x, ${n.x2} 2x" alt="${r}"/>
                                <div class="category-overlay">${r}</div> 
                            </div>
                        </a>
                    </li>                
                    `).join(""))}catch(e){console.error("Помилка при заватаженні категорій: ",e)}},j=e=>{_.insertAdjacentHTML("beforeend",e.map(({_id:t,name:r,color:n,price:o,images:i})=>{const s=n.map(a=>`<span class="color-pick" style="background-color:${a};"></span>`).join("");return`
                <li class="gallery-item" data-id="${t}">
                    <img src="${i[0]}" alt="${r}" class="furniture-img"/>
                    <div class="gallery-item-dscr">
                        <p class="furniture-title">${r}</p>
                        <div class="color" data-id="${n}">${s}</div>
                        <p class="price">${o} грн</p>                    
                    </div>
                    <button type="button" class="gallery-item-info-btn">Детальніше</button>
                </li>
                `}).join(""))},de=()=>{_.innerHTML=""},S=()=>{H.classList.remove("hidden")},p=()=>{H.classList.add("hidden")},z=e=>{L.querySelectorAll(".category-link").forEach(t=>{const r=t.getAttribute("data-category")===e;t.classList.toggle("active",r);const n=t.querySelector(".category-overlay");n&&(n.classList.remove("is-active"),r&&n.classList.add("is-active"))})};let c=1,h="all";document.addEventListener("DOMContentLoaded",async()=>{try{le(P),S();const e=await x(c);e.furnitures.length<8?l.disabled=!0:l.disabled=!1,j(e.furnitures),p(),z("all")}catch(e){console.error("Помилка при завантаженні меблів:",e),p()}});L.addEventListener("click",async e=>{const t=e.target.closest(".category-link");if(!t)return;const r=t.dataset.category;z(r),de(),S();try{c=1,h=r;let n;r==="all"?n=await x(c):n=await O(r,c),n.furnitures.length<8?l.disabled=!0:l.disabled=!1,j(n.furnitures)}catch(n){console.error("Помилка при завантаженні меблів по категорії:",n)}finally{p()}});l.addEventListener("click",async()=>{c+=1,S();try{let e;h==="all"?e=await x(c):e=await O(h,c),e.furnitures.length<8&&(l.disabled=!0),j(e.furnitures)}catch(e){console.error("Помилка при завантаженні меблів:",e)}finally{p()}});_.addEventListener("click",e=>{if(e.target.classList.contains("gallery-item-info-btn")){const t=e.target.closest(".gallery-item").dataset.id;Q(t),oe()}});function ue(){const e={duration:350,showMultiple:!1,elementClass:"accordion-item",triggerClass:"accordion-trigger",panelClass:"accordion-panel",activeClass:"accordion-active"},t=new D(".accordion-list",e);return document.querySelectorAll(".accordion-item").forEach(r=>r.classList.add("js-enabled")),t}document.addEventListener("DOMContentLoaded",()=>{document.querySelector(".accordion-list")&&ue()});
//# sourceMappingURL=index.js.map
