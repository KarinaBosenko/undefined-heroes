import{a as m,A as P,i as j}from"./assets/vendor-CeEp1xzB.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function r(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(n){if(n.ep)return;n.ep=!0;const o=r(n);fetch(n.href,o)}})();const E=document.querySelector(".burger-menu"),w=document.querySelector(".close-burger-menu"),u=document.querySelector(".menu-overlay"),$=document.body,N=document.querySelectorAll(".navigation-item-menu, .go-shopping-button-menu");function q(e){e.key==="Escape"&&g()}function C(e){const t=e.target,r=t.closest(".header-menu-bg"),i=t.closest(".navigation-menu"),n=t.closest(".navigation-menu::after");r||i||n||g()}function z(){u.classList.add("open"),$.classList.add("menu-open"),document.addEventListener("keydown",q),u.addEventListener("click",C)}function g(){u.classList.remove("open"),$.classList.remove("menu-open"),document.removeEventListener("keydown",q),u.removeEventListener("click",C)}E&&E.addEventListener("click",z);w&&w.addEventListener("click",g);N.forEach(e=>{e.addEventListener("click",g)});const f="https://furniture-store-v2.b.goit.study/api";async function D(){try{return(await m.get(`${f}/categories`)).data}catch(e){throw console.error("Error fetching categories:",e),e}}async function x(e=1){try{return(await m.get(`${f}/furnitures`,{params:{limit:8,page:e}})).data}catch(t){throw console.error("Error fetching default furniture:",t),t}}async function A(e,t=1){try{return(await m.get(`${f}/furnitures`,{params:{category:e,limit:8,page:t}})).data}catch(r){throw console.error(`Error fetching furniture for category ${e}:`,r),r}}async function H(e){try{const t=await m.post(`${f}/orders`,e);return console.log(t.data),t.data}catch(t){throw console.error("Error submitting order:",t),t}}let M=null,T=null;function G(e){M=e}function K(){return M}function R(){return T}const v=document.querySelector("ul.furniture-categories"),_=document.querySelector("ul.furniture-gallery"),c=document.querySelector("button.furniture-load-more-btn"),O=document.querySelector("span.loader"),B=[{id:"all",name:"Всі товари",image:{x1:"../img/furniture_list_section/all1x-min.jpg",x2:"../img/furniture_list_section/all2x-min.jpg"}},{id:"66504a50a1b2c3d4e5f6a7b8",name:"М'які меблі",image:{x1:"../img/furniture_list_section/sofa1x-min.jpg",x2:"../img/furniture_list_section/sofa2x-min.jpg"}},{id:"66504a50a1b2c3d4e5f6a7b9",name:"Шафи та системи зберігання",image:{x1:"../img/furniture_list_section/wardrobe1x-min.jpg",x2:"../img/furniture_list_section/wardrobe2x-min.jpg"}},{id:"66504a50a1b2c3d4e5f6a7ba",name:"Ліжка та матраци",image:{x1:"../img/furniture_list_section/bed1x-min.jpg",x2:"../img/furniture_list_section/bed2x-min.jpg"}},{id:"66504a50a1b2c3d4e5f6a7bb",name:"Столи",image:{x1:"../img/furniture_list_section/table1x-min.jpg",x2:"../img/furniture_list_section/table2x-min.jpg"}},{id:"66504a50a1b2c3d4e5f6a7bc",name:"Стільці та табурети",image:{x1:"../img/furniture_list_section/chairs1x-min.jpg",x2:"../img/furniture_list_section/chairs2x-min.jpg"}},{id:"66504a50a1b2c3d4e5f6a7bd",name:"Кухні",image:{x1:"../img/furniture_list_section/kitchen1x-min.jpg",x2:"../img/furniture_list_section/kitchen2x-min.jpg"}},{id:"66504a50a1b2c3d4e5f6a7be",name:"Меблі для дитячої",image:{x1:"../img/furniture_list_section/kid1x-min.jpg",x2:"../img/furniture_list_section/kid2x-min.jpg"}},{id:"66504a50a1b2c3d4e5f6a7bf",name:"Меблі для офісу",image:{x1:"../img/furniture_list_section/office1x-min.jpg",x2:"../img/furniture_list_section/office2x-min.jpg"}},{id:"66504a50a1b2c3d4e5f6a7c0",name:"Меблі для передпокою",image:{x1:"../img/furniture_list_section/entryway1x-min.jpg",x2:"../img/furniture_list_section/entryway2x-min.jpg"}},{id:"66504a50a1b2c3d4e5f6a7c1",name:"Меблі для ванної кімнати",image:{x1:"../img/furniture_list_section/bathroom1x-min.jpg",x2:"../img/furniture_list_section/bathroom2x-min.jpg"}},{id:"66504a50a1b2c3d4e5f6a7c2",name:"Садові та вуличні меблі",image:{x1:"../img/furniture_list_section/garden1x-min.jpg",x2:"../img/furniture_list_section/garden2x-min.jpg"}},{id:"66504a50a1b2c3d4e5f6a7c3",name:"Декор та аксесуари",image:{x1:"../img/furniture_list_section/decor1x-min.jpg",x2:"../img/furniture_list_section/decor2x-min.jpg"}}],U=async()=>{try{let e=await D();v.insertAdjacentHTML("beforeend",B.filter(t=>t.id==="all"||e.find(r=>r._id===t.id)).map(({id:t,name:r,image:i})=>`
                    <li class="category-item">
                        <a class="category-link" data-category="${t}">
                            <div class="category-img-wrapper">
                                <img class="category-img" src="${i.x1}" srcset="${i.x1} 1x, ${i.x2} 2x" alt="${r}"/>
                                <div class="category-overlay">${r}</div> 
                            </div>
                        </a>
                    </li>                
                    `).join(""))}catch(e){console.error("Помилка при заватаженні категорій: ",e)}},h=e=>{_.insertAdjacentHTML("beforeend",e.map(({_id:t,name:r,color:i,price:n,images:o})=>{const s=i.map(I=>`<span class="color-pick" style="background-color:${I};"></span>`).join("");return`
                <li class="gallery-item" data-id="${t}">
                    <img src="${o[0]}" alt="${r}" class="furniture-img"/>
                    <div class="gallery-item-dscr">
                        <p class="furniture-title">${r}</p>
                        <div class="color" data-id="${i}">${s}</div>
                        <p class="price">${n} грн</p>                    
                    </div>
                    <button type="button" class="gallery-item-info-btn">Детальніше</button>
                </li>
                `}).join(""))},J=()=>{_.innerHTML=""},L=()=>{O.classList.remove("hidden")},d=()=>{O.classList.add("hidden")},F=e=>{v.querySelectorAll(".category-link").forEach(t=>{const r=t.getAttribute("data-category")===e;t.classList.toggle("active",r);const i=t.querySelector(".category-overlay");i&&(i.classList.remove("is-active"),r&&i.classList.add("is-active"))})};let a=1,y="all";document.addEventListener("DOMContentLoaded",async()=>{try{U(B),L();const e=await x(a);e.furnitures.length<8?c.disabled=!0:c.disabled=!1,h(e.furnitures),d(),F("all")}catch(e){console.error("Помилка при завантаженні меблів:",e),d()}});v.addEventListener("click",async e=>{const t=e.target.closest(".category-link");if(!t)return;const r=t.dataset.category;F(r),J(),L();try{a=1,y=r;let i;r==="all"?i=await x(a):i=await A(r,a),i.furnitures.length<8?c.disabled=!0:c.disabled=!1,h(i.furnitures)}catch(i){console.error("Помилка при завантаженні меблів по категорії:",i)}finally{d()}});c.addEventListener("click",async()=>{a+=1,L();try{let e;y==="all"?e=await x(a):e=await A(y,a),e.furnitures.length<8&&(c.disabled=!0),h(e.furnitures)}catch(e){console.error("Помилка при завантаженні меблів:",e)}finally{d()}});_.addEventListener("click",e=>{if(e.target.classList.contains("gallery-item-info-btn")){const t=e.target.closest(".gallery-item").dataset.id;G(t),openDetailsModal()}});function Q(){const e={duration:350,showMultiple:!1,elementClass:"accordion-item",triggerClass:"accordion-trigger",panelClass:"accordion-panel",activeClass:"accordion-active"},t=new P(".accordion-list",e);return document.querySelectorAll(".accordion-item").forEach(r=>r.classList.add("js-enabled")),t}document.addEventListener("DOMContentLoaded",()=>{document.querySelector(".accordion-list")&&Q()});const b=document.querySelector(".modal-overlay"),V=document.querySelector(".close-button"),l=document.querySelector(".order-form"),W=document.querySelector(".loader"),X=document.querySelectorAll(".user-input, .user-text"),Y=document.querySelector(".order-button");function p(){b.classList.remove("is-open"),document.body.style.overflow=""}function S(){W.classList.toggle("hidden")}function k(){Y.classList.toggle("hidden")}V.addEventListener("click",p);b.addEventListener("click",e=>{e.target===b&&p()});document.addEventListener("keydown",e=>{e.key==="Escape"&&p()});l.addEventListener("submit",Z);async function Z(e){e.preventDefault(),S(),k();const t=l.elements.username.value.trim(),r=l.elements["user-phone"].value.trim(),i=l.elements["form-comments"].value.trim(),n={name:t,phone:r,modelId:K(),color:R(),comment:i};try{const o=await H(n);console.log(o),o&&j.success({title:`Дякуємо, ${o.name}!`,message:`Замовлення №${o.orderNum} прийнято! Наш оператор зв'яжеться з вами найближчим часом.`,color:"green",position:"center",titleSize:"18px",messageSize:"18px"}),l.reset(),p()}catch(o){X.forEach(s=>{s.classList.add("error-message"),s.addEventListener("input",()=>{s.classList.remove("error-message")})}),j.error({title:"Помилка",message:`${o.response.data.message}`,color:"red",position:"center",closeOnClick:!0,titleSize:"18px",messageSize:"18px"})}finally{S(),k()}}
//# sourceMappingURL=index.js.map
