import{a as l,i as v,S as B,N as A,P,A as Y}from"./assets/vendor-DyNIEbgu.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=r(i);fetch(i.href,o)}})();const _=document.querySelector(".burger-menu"),j=document.querySelector(".close-burger-menu"),f=document.querySelector(".menu-overlay"),H=document.body,Z=document.querySelectorAll(".navigation-item-menu, .go-shopping-button-menu");function O(e){e.key==="Escape"&&h()}function T(e){const t=e.target,r=t.closest(".header-menu-bg"),n=t.closest(".navigation-menu"),i=t.closest(".navigation-menu::after");r||n||i||h()}function ee(){f.classList.add("open"),H.classList.add("menu-open"),document.addEventListener("keydown",O),f.addEventListener("click",T)}function h(){f.classList.remove("open"),H.classList.remove("menu-open"),document.removeEventListener("keydown",O),f.removeEventListener("click",T)}_&&_.addEventListener("click",ee);j&&j.addEventListener("click",h);Z.forEach(e=>{e.addEventListener("click",h)});const d="https://furniture-store-v2.b.goit.study/api";async function te(){try{return(await l.get(`${d}/categories`)).data}catch(e){throw console.error("Error fetching categories:",e),e}}async function w(e=1){try{return(await l.get(`${d}/furnitures`,{params:{limit:8,page:e}})).data}catch(t){throw console.error("Error fetching default furniture:",t),t}}async function F(e,t=1){try{return(await l.get(`${d}/furnitures`,{params:{category:e,limit:8,page:t}})).data}catch(r){throw console.error(`Error fetching furniture for category ${e}:`,r),r}}async function re(e){try{return(await l.get(`${d}/furnitures/${e}`)).data}catch(t){throw console.error(`Error fetching furniture with id ${e}:`,t),t}}async function ne(){try{return(await l.get(`${d}/feedbacks`,{params:{limit:10}})).data}catch(e){throw console.error("Error fetching feedbacks:",e),e}}async function oe(e){try{const t=await l.post(`${d}/orders`,e);return console.log(t.data),t.data}catch(t){throw console.error("Error submitting order:",t),t}}async function ie(){try{return(await l.get(`${d}/furnitures`,{params:{type:"popular"}})).data}catch(e){throw console.error("Error fetching popular furniture:",e),e}}let I=null,N=null;function D(e){I=e}function z(){return I}function se(e){N=e}function ae(){return N}const g=document.querySelector(".modal-overlay"),ce=document.querySelector(".close-button"),m=document.querySelector(".order-form"),le=document.querySelector(".loader"),de=document.querySelectorAll(".user-input, .user-text"),ue=document.querySelector(".order-button");function b(){g.classList.remove("is-open"),document.body.style.overflow=""}function me(){g.classList.add("is-open"),document.body.style.overflow="hidden"}function E(){le.classList.toggle("hidden")}function q(){ue.classList.toggle("hidden")}ce.addEventListener("click",b);g.addEventListener("click",e=>{e.target===g&&b()});document.addEventListener("keydown",e=>{e.key==="Escape"&&b()});m.addEventListener("submit",fe);async function fe(e){e.preventDefault(),E(),q();const t=m.elements.username.value.trim(),r=m.elements["user-phone"].value.trim(),n=m.elements["form-comments"].value.trim(),i={name:t,phone:r,modelId:z(),color:ae(),comment:n};try{const o=await oe(i);console.log(o),o&&v.success({title:`Дякуємо, ${o.name}!`,message:`Замовлення №${o.orderNum} прийнято! Наш оператор зв'яжеться з вами найближчим часом.`,color:"green",position:"center",titleSize:"18px",messageSize:"18px"}),m.reset(),b()}catch(o){de.forEach(s=>{s.classList.add("error-message"),s.addEventListener("input",()=>{s.classList.remove("error-message")})}),v.error({title:"Помилка",message:`${o.response.data.message}`,color:"red",position:"center",closeOnClick:!0,titleSize:"18px",messageSize:"18px"})}finally{E(),q()}}const ge=document.querySelector(".js-modal-product"),V=ge.querySelector(".loader");async function R(){const e=z();if(e){he();try{const t=await re(e);pe(t)}catch(t){console.error("Помилка завантаження товару:",t)}finally{be()}}}function pe(e){const t=document.querySelector(".js-modal-product"),r=t.querySelector(".product-modal");r.querySelector(".js-title").textContent=e.name,r.querySelector(".js-category").textContent=e.category.name,r.querySelector(".js-price").textContent=`${e.price} грн`,r.querySelector(".js-description").textContent=e.description,r.querySelector(".js-dimensions").textContent=`Розміри: ${e.sizes}`;const n=r.querySelector(".js-big-img");n.innerHTML=`<img src="${e.images[0]}" alt="${e.name}">`;const i=r.querySelector(".js-thumbs");i.innerHTML=`
    <img src="${e.images[1]}" alt="${e.name}">
    <img src="${e.images[2]}" alt="${e.name}">
  `;const o=r.querySelector(".js-colors");o.innerHTML=e.color.map((a,X)=>`
      <li>
        <label class="color-option">
          <input type="radio" name="color" value="${a}" ${X===0?"checked":""}/>
          <span class="color-swatch" style="background:${a}"></span>
        </label>
      </li>`).join(""),r.querySelector(".js-rating").innerHTML=ye(e.rate),t.classList.add("active"),setTimeout(()=>r.classList.add("animate-in"),10),document.body.style.overflow="hidden",o.addEventListener("change",a=>{a.target.name==="color"&&se(a.target.value)}),r.querySelector(".js-to-order").addEventListener("click",()=>{p(),setTimeout(()=>{me()},350)})}function ye(e){const t=Math.floor(e),r=5-t;return"★".repeat(t)+"☆".repeat(r)}function p(){const e=document.querySelector(".js-modal-product");e.querySelector(".product-modal").classList.remove("animate-in"),setTimeout(()=>{e.classList.remove("active"),document.body.style.overflow=""},300)}document.addEventListener("click",e=>{e.target.closest(".js-close-product")&&p();const t=document.querySelector(".js-modal-product");e.target===t&&p()});window.addEventListener("keydown",e=>{e.key==="Escape"&&p()});function he(){V.classList.remove("hidden")}function be(){V.classList.add("hidden")}const x=document.querySelector("ul.furniture-categories"),S=document.querySelector("ul.furniture-gallery"),u=document.querySelector("button.furniture-load-more-btn"),G=document.querySelector("span.loader"),K=[{id:"all",name:"Всі товари",image:{x1:"/img/furniture_list_section/all1x-min.jpg",x2:"/img/furniture_list_section/all2x-min.jpg"}},{id:"66504a50a1b2c3d4e5f6a7b8",name:"М'які меблі",image:{x1:"/img/furniture_list_section/sofa1x-min.jpg",x2:"/img/furniture_list_section/sofa2x-min.jpg"}},{id:"66504a50a1b2c3d4e5f6a7b9",name:"Шафи та системи зберігання",image:{x1:"/img/furniture_list_section/wardrobe1x-min.jpg",x2:"/img/furniture_list_section/wardrobe2x-min.jpg"}},{id:"66504a50a1b2c3d4e5f6a7ba",name:"Ліжка та матраци",image:{x1:"/img/furniture_list_section/bed1x-min.jpg",x2:"/img/furniture_list_section/bed2x-min.jpg"}},{id:"66504a50a1b2c3d4e5f6a7bb",name:"Столи",image:{x1:"/img/furniture_list_section/table1x-min.jpg",x2:"/img/furniture_list_section/table2x-min.jpg"}},{id:"66504a50a1b2c3d4e5f6a7bc",name:"Стільці та табурети",image:{x1:"/img/furniture_list_section/chairs1x-min.jpg",x2:"/img/furniture_list_section/chairs2x-min.jpg"}},{id:"66504a50a1b2c3d4e5f6a7bd",name:"Кухні",image:{x1:"/img/furniture_list_section/kitchen1x-min.jpg",x2:"/img/furniture_list_section/kitchen2x-min.jpg"}},{id:"66504a50a1b2c3d4e5f6a7be",name:"Меблі для дитячої",image:{x1:"/img/furniture_list_section/kid1x-min.jpg",x2:"/img/furniture_list_section/kid2x-min.jpg"}},{id:"66504a50a1b2c3d4e5f6a7bf",name:"Меблі для офісу",image:{x1:"/img/furniture_list_section/office1x-min.jpg",x2:"/img/furniture_list_section/office2x-min.jpg"}},{id:"66504a50a1b2c3d4e5f6a7c0",name:"Меблі для передпокою",image:{x1:"/img/furniture_list_section/entryway1x-min.jpg",x2:"/img/furniture_list_section/entryway2x-min.jpg"}},{id:"66504a50a1b2c3d4e5f6a7c1",name:"Меблі для ванної кімнати",image:{x1:"/img/furniture_list_section/bathroom1x-min.jpg",x2:"/img/furniture_list_section/bathroom2x-min.jpg"}},{id:"66504a50a1b2c3d4e5f6a7c2",name:"Садові та вуличні меблі",image:{x1:"/img/furniture_list_section/garden1x-min.jpg",x2:"/img/furniture_list_section/garden2x-min.jpg"}},{id:"66504a50a1b2c3d4e5f6a7c3",name:"Декор та аксесуари",image:{x1:"/img/furniture_list_section/decor1x-min.jpg",x2:"/img/furniture_list_section/decor2x-min.jpg"}}],ve=async()=>{try{let e=await te();x.insertAdjacentHTML("beforeend",K.filter(t=>t.id==="all"||e.find(r=>r._id===t.id)).map(({id:t,name:r,image:n})=>`
                    <li class="category-item">
                        <a class="category-link" data-category="${t}">
                            <div class="category-img-wrapper">
                                <img class="category-img" src="${n.x1}" srcset="${n.x1} 1x, ${n.x2} 2x" alt="${r}"/>
                                <div class="category-overlay">${r}</div> 
                            </div>
                        </a>
                    </li>                
                    `).join(""))}catch(e){console.error("Помилка при заватаженні категорій: ",e)}},$=e=>{S.insertAdjacentHTML("beforeend",e.map(({_id:t,name:r,color:n,price:i,images:o})=>{const s=n.map(a=>`<span class="color-pick" style="background-color:${a};"></span>`).join("");return`
                <li class="gallery-item" data-id="${t}">
                    <img src="${o[0]}" alt="${r}" class="furniture-img"/>
                    <div class="gallery-item-dscr">
                        <p class="furniture-title">${r}</p>
                        <div class="color" data-id="${n}">${s}</div>
                        <p class="price">${i} грн</p>                    
                    </div>
                    <button type="button" class="gallery-item-info-btn">Детальніше</button>
                </li>
                `}).join(""))},Le=()=>{S.innerHTML=""},k=()=>{G.classList.remove("hidden")},y=()=>{G.classList.add("hidden")},U=e=>{x.querySelectorAll(".category-link").forEach(t=>{const r=t.getAttribute("data-category")===e;t.classList.toggle("active",r);const n=t.querySelector(".category-overlay");n&&(n.classList.remove("is-active"),r&&n.classList.add("is-active"))})};let c=1,L="all";document.addEventListener("DOMContentLoaded",async()=>{try{ve(K),k();const e=await w(c);e.furnitures.length<8?u.disabled=!0:u.disabled=!1,$(e.furnitures),y(),U("all")}catch(e){console.error("Помилка при завантаженні меблів:",e),y()}});x.addEventListener("click",async e=>{const t=e.target.closest(".category-link");if(!t)return;const r=t.dataset.category;U(r),Le(),k();try{c=1,L=r;let n;r==="all"?n=await w(c):n=await F(r,c),n.furnitures.length<8?u.disabled=!0:u.disabled=!1,$(n.furnitures)}catch(n){console.error("Помилка при завантаженні меблів по категорії:",n)}finally{y()}});u.addEventListener("click",async()=>{c+=1,k();try{let e;L==="all"?e=await w(c):e=await F(L,c),e.furnitures.length<8&&(u.disabled=!0),$(e.furnitures)}catch(e){console.error("Помилка при завантаженні меблів:",e)}finally{y()}});S.addEventListener("click",e=>{if(e.target.classList.contains("gallery-item-info-btn")){const t=e.target.closest(".gallery-item").dataset.id;D(t),R()}});const J=document.querySelector(".popular-products-gallery"),Q=document.querySelector(".loader");document.addEventListener("DOMContentLoaded",we);J.addEventListener("click",_e);async function we(){try{Se();const{furnitures:e}=await ie(),t=xe(e);J.insertAdjacentHTML("beforeend",t),ke()}catch{v.error({title:"Error",position:"topRight",message:"Oops! Something went wrong"})}finally{$e()}}function xe(e){return e.map(({_id:t,name:r,color:n,price:i,images:o})=>{const s=n.map(a=>`<span class="gallery-item-color-pick" style="background-color:${a};"></span>`).join("");return`
    <li class="gallery-item swiper-slide" data-id="${t}">
        <img src="${o[0]}" alt="${r}" class="gallery-item-img"/>
        <div class="gallery-item-dscr">
            <p class="gallery-item-title">${r}</p>
            <div class="gallery-item-color" data-id="${n}">${s}</div>
             <p class="gallery-item-price">${i} грн</p>                    
        </div>
        <button type="button" class="gallery-item-info-btn">Детальніше</button>
    </li>`}).join("")}function Se(){Q.classList.remove("hidden")}function $e(){Q.classList.add("hidden")}function ke(){const e=document.querySelector(".popular-products-swiper"),t=document.querySelector(".swiper-button-prev"),r=document.querySelector(".swiper-button-next");new B(e,{modules:[A,P],slidesPerView:1,spaceBetween:16,loop:!1,navigation:{nextEl:r,prevEl:t},pagination:{el:".swiper-pagination",clickable:!0,dynamicBullets:!0},breakpoints:{768:{slidesPerView:2,spaceBetween:24},1440:{slidesPerView:4}},on:{init:function(){C(this,t,r)},slideChange:function(){C(this,t,r)}}})}function C(e,t,r){t.disabled=e.isBeginning,r.disabled=e.isEnd}function _e(e){const t=e.target.closest(".gallery-item-info-btn");if(!t)return;const n=t.closest(".gallery-item").dataset.id;D(n),R()}function je(){const e={duration:350,showMultiple:!1,elementClass:"accordion-item",triggerClass:"accordion-trigger",panelClass:"accordion-panel",activeClass:"accordion-active"},t=new Y(".accordion-list",e);return document.querySelectorAll(".accordion-item").forEach(r=>r.classList.add("js-enabled")),t}document.addEventListener("DOMContentLoaded",()=>{document.querySelector(".accordion-list")&&je()});const W=document.getElementById("loader");function Ee(){W.classList.remove("hidden")}function qe(){W.classList.add("hidden")}function Ce(e){return e>=3.3&&e<=3.7?3.5:e>=3.8&&e<=4.2?4:Math.round(e*2)/2}function Me(e){const t=Math.floor(e),r=e%1!==0,n=5;let i="";for(let o=0;o<n;o++){let s="star-empty";o<t?s="star-filled":o===t&&r&&(s="star-half"),i+=`
      <div class="star">
        <svg width="24" height="24" viewBox="0 0 34 32">
          <use href="./img/icons.svg#${s}"></use>
        </svg>
      </div>
    `}return i}function Be(e){const t=document.getElementById("feedback-list");t.innerHTML="",e.forEach(r=>{const n=Ce(r.rate),i=n%1!==0,a=`
        <li class="feedback-card swiper-slide">
            <div class="rating ${`value-${Math.floor(n)}`} ${i?"half":""} star-svg medium color-default">
              <div class="star-container">
                ${Me(n)}
              </div>
            </div>
            <p class="feedback-text">"${r.descr}"</p>
            <p class="feedback-author">${r.name}</p>
        </li>
    `;t.insertAdjacentHTML("beforeend",a)})}function Ae(){const e=document.querySelector(".swiper"),t=document.querySelector(".swiper-button-prev"),r=document.querySelector(".swiper-button-next");feedbackSwiper=new B(e,{modules:[A,P],loop:!1,spaceBetween:20,slidesPerView:1,pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:r,prevEl:t},breakpoints:{768:{slidesPerView:2,spaceBetween:30},1440:{slidesPerView:3,spaceBetween:40}},on:{init:function(){M(this,t,r)},slideChange:function(){M(this,t,r)}}})}function M(e,t,r){t.disabled=e.isBeginning,r.disabled=e.isEnd}async function Pe(){Ee();try{const e=await ne();let t;if(e&&Array.isArray(e.feedbacks))t=e.feedbacks;else if(Array.isArray(e))t=e;else{console.error("API повернуло дані в неочікуваному форматі:",e);return}Be(t),Ae()}catch(e){console.error("Помилка завантаження відгуків:",e)}finally{qe()}}Pe();
//# sourceMappingURL=index.js.map
